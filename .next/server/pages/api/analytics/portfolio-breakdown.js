"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/analytics/portfolio-breakdown";
exports.ids = ["pages/api/analytics/portfolio-breakdown"];
exports.modules = {

/***/ "(api-node)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pool: () => (/* binding */ pool),\n/* harmony export */   query: () => (/* binding */ query)\n/* harmony export */ });\n// lib/db.js\n// Initialize query and pool as null\nlet pool = null;\nlet query = null;\n// Only run this code on the server\nif (true) {\n    try {\n        // Server-side code - import pg using require to avoid webpack issues\n        const { Pool } = __webpack_require__(/*! pg */ \"pg\");\n        // Create a database connection pool\n        pool =  false ? 0 : new Pool({\n            user: process.env.DB_USER || 'postgres',\n            host: process.env.DB_HOST || 'localhost',\n            database: process.env.DB_NAME || 'innvestai',\n            password: process.env.DB_PASSWORD || 'Temp@123',\n            port: parseInt(process.env.DB_PORT || '5432')\n        });\n        // Define the query function\n        query = async (text, params)=>{\n            try {\n                const start = Date.now();\n                const res = await pool.query(text, params);\n                const duration = Date.now() - start;\n                // Log query performance in development\n                if (true) {\n                    console.log('Executed query', {\n                        text,\n                        duration,\n                        rows: res.rowCount\n                    });\n                }\n                return res;\n            } catch (error) {\n                console.error('Database query error:', error);\n                throw error;\n            }\n        };\n        // Setup event handlers for the pool\n        pool.on('error', (err)=>{\n            console.error('Unexpected database error:', err);\n        // Don't crash the server on connection errors\n        });\n        console.log('Database module initialized on server');\n    } catch (error) {\n        console.error('Failed to initialize database module:', error);\n        // Create non-functional stubs if initialization fails\n        pool = {\n            query: ()=>{\n                throw new Error('Database pool not initialized');\n            },\n            on: ()=>{}\n        };\n        query = async ()=>{\n            throw new Error('Database query function not initialized');\n        };\n    }\n} else {}\n// Next.js supports ES modules by default\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9kYi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLFlBQVk7QUFFWixvQ0FBb0M7QUFDcEMsSUFBSUEsT0FBTztBQUNYLElBQUlDLFFBQVE7QUFFWixtQ0FBbUM7QUFDbkMsSUFBSSxJQUE2QixFQUFFO0lBQ2pDLElBQUk7UUFDRixxRUFBcUU7UUFDckUsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBR0MsbUJBQU9BLENBQUMsY0FBSTtRQUU3QixvQ0FBb0M7UUFDcENILE9BQU9JLE1BQXFDLEdBQ3hDLENBS0UsR0FDRixJQUFJRixLQUFLO1lBQ1BRLE1BQU1OLFFBQVFFLEdBQUcsQ0FBQ0ssT0FBTyxJQUFJO1lBQzdCQyxNQUFNUixRQUFRRSxHQUFHLENBQUNPLE9BQU8sSUFBSTtZQUM3QkMsVUFBVVYsUUFBUUUsR0FBRyxDQUFDUyxPQUFPLElBQUk7WUFDakNDLFVBQVVaLFFBQVFFLEdBQUcsQ0FBQ1csV0FBVyxJQUFJO1lBQ3JDQyxNQUFNQyxTQUFTZixRQUFRRSxHQUFHLENBQUNjLE9BQU8sSUFBSTtRQUN4QztRQUVKLDRCQUE0QjtRQUM1Qm5CLFFBQVEsT0FBT29CLE1BQU1DO1lBQ25CLElBQUk7Z0JBQ0YsTUFBTUMsUUFBUUMsS0FBS0MsR0FBRztnQkFDdEIsTUFBTUMsTUFBTSxNQUFNMUIsS0FBS0MsS0FBSyxDQUFDb0IsTUFBTUM7Z0JBQ25DLE1BQU1LLFdBQVdILEtBQUtDLEdBQUcsS0FBS0Y7Z0JBRTlCLHVDQUF1QztnQkFDdkMsSUFBSW5CLElBQXFDLEVBQUU7b0JBQ3pDd0IsUUFBUUMsR0FBRyxDQUFDLGtCQUFrQjt3QkFBRVI7d0JBQU1NO3dCQUFVRyxNQUFNSixJQUFJSyxRQUFRO29CQUFDO2dCQUNyRTtnQkFFQSxPQUFPTDtZQUNULEVBQUUsT0FBT00sT0FBTztnQkFDZEosUUFBUUksS0FBSyxDQUFDLHlCQUF5QkE7Z0JBQ3ZDLE1BQU1BO1lBQ1I7UUFDRjtRQUVBLG9DQUFvQztRQUNwQ2hDLEtBQUtpQyxFQUFFLENBQUMsU0FBUyxDQUFDQztZQUNoQk4sUUFBUUksS0FBSyxDQUFDLDhCQUE4QkU7UUFDNUMsOENBQThDO1FBQ2hEO1FBRUFOLFFBQVFDLEdBQUcsQ0FBQztJQUNkLEVBQUUsT0FBT0csT0FBTztRQUNkSixRQUFRSSxLQUFLLENBQUMseUNBQXlDQTtRQUV2RCxzREFBc0Q7UUFDdERoQyxPQUFPO1lBQ0xDLE9BQU87Z0JBQVEsTUFBTSxJQUFJa0MsTUFBTTtZQUFrQztZQUNqRUYsSUFBSSxLQUFPO1FBQ2I7UUFFQWhDLFFBQVE7WUFBYyxNQUFNLElBQUlrQyxNQUFNO1FBQTRDO0lBQ3BGO0FBQ0YsT0FBTyxFQVlOO0FBRUQseUNBQXlDO0FBQ2xCIiwic291cmNlcyI6WyJDOlxcdmlub2RcXHByb2plY3RzXFxpbm52ZXN0XFxQT0NcXGlubnZlc3RhaVxcbGliXFxkYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvZGIuanNcclxuXHJcbi8vIEluaXRpYWxpemUgcXVlcnkgYW5kIHBvb2wgYXMgbnVsbFxyXG5sZXQgcG9vbCA9IG51bGw7XHJcbmxldCBxdWVyeSA9IG51bGw7XHJcblxyXG4vLyBPbmx5IHJ1biB0aGlzIGNvZGUgb24gdGhlIHNlcnZlclxyXG5pZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICB0cnkge1xyXG4gICAgLy8gU2VydmVyLXNpZGUgY29kZSAtIGltcG9ydCBwZyB1c2luZyByZXF1aXJlIHRvIGF2b2lkIHdlYnBhY2sgaXNzdWVzXHJcbiAgICBjb25zdCB7IFBvb2wgfSA9IHJlcXVpcmUoJ3BnJyk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgZGF0YWJhc2UgY29ubmVjdGlvbiBwb29sXHJcbiAgICBwb29sID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyBcclxuICAgICAgPyBuZXcgUG9vbCh7XHJcbiAgICAgICAgICBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwsXHJcbiAgICAgICAgICBzc2w6IHtcclxuICAgICAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIDogbmV3IFBvb2woe1xyXG4gICAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAncG9zdGdyZXMnLFxyXG4gICAgICAgICAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCAnbG9jYWxob3N0JyxcclxuICAgICAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICdpbm52ZXN0YWknLCAvLyBVc2UgYnVpbHQtaW4gcG9zdGdyZXMgZGF0YWJhc2VcclxuICAgICAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCB8fCAnVGVtcEAxMjMnLFxyXG4gICAgICAgICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9SVCB8fCAnNTQzMicpLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIERlZmluZSB0aGUgcXVlcnkgZnVuY3Rpb25cclxuICAgIHF1ZXJ5ID0gYXN5bmMgKHRleHQsIHBhcmFtcykgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBwb29sLnF1ZXJ5KHRleHQsIHBhcmFtcyk7XHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTG9nIHF1ZXJ5IHBlcmZvcm1hbmNlIGluIGRldmVsb3BtZW50XHJcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdFeGVjdXRlZCBxdWVyeScsIHsgdGV4dCwgZHVyYXRpb24sIHJvd3M6IHJlcy5yb3dDb3VudCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBxdWVyeSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gU2V0dXAgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBwb29sXHJcbiAgICBwb29sLm9uKCdlcnJvcicsIChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcignVW5leHBlY3RlZCBkYXRhYmFzZSBlcnJvcjonLCBlcnIpO1xyXG4gICAgICAvLyBEb24ndCBjcmFzaCB0aGUgc2VydmVyIG9uIGNvbm5lY3Rpb24gZXJyb3JzXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgbW9kdWxlIGluaXRpYWxpemVkIG9uIHNlcnZlcicpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBkYXRhYmFzZSBtb2R1bGU6JywgZXJyb3IpO1xyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgbm9uLWZ1bmN0aW9uYWwgc3R1YnMgaWYgaW5pdGlhbGl6YXRpb24gZmFpbHNcclxuICAgIHBvb2wgPSB7XHJcbiAgICAgIHF1ZXJ5OiAoKSA9PiB7IHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgcG9vbCBub3QgaW5pdGlhbGl6ZWQnKTsgfSxcclxuICAgICAgb246ICgpID0+IHt9XHJcbiAgICB9O1xyXG5cclxuICAgIHF1ZXJ5ID0gYXN5bmMgKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIHF1ZXJ5IGZ1bmN0aW9uIG5vdCBpbml0aWFsaXplZCcpOyB9O1xyXG4gIH1cclxufSBlbHNlIHtcclxuICAvLyBDbGllbnQtc2lkZSBtb2NrIGltcGxlbWVudGF0aW9uXHJcbiAgcXVlcnkgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIHF1ZXJpZXMgY2Fubm90IGJlIGV4ZWN1dGVkIG9uIHRoZSBjbGllbnQgc2lkZScpO1xyXG4gIH07XHJcbiAgXHJcbiAgcG9vbCA9IHtcclxuICAgIHF1ZXJ5OiAoKSA9PiB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgcXVlcmllcyBjYW5ub3QgYmUgZXhlY3V0ZWQgb24gdGhlIGNsaWVudCBzaWRlJyk7XHJcbiAgICB9LFxyXG4gICAgb246ICgpID0+IHt9XHJcbiAgfTtcclxufVxyXG5cclxuLy8gTmV4dC5qcyBzdXBwb3J0cyBFUyBtb2R1bGVzIGJ5IGRlZmF1bHRcclxuZXhwb3J0IHsgcXVlcnksIHBvb2wgfTsiXSwibmFtZXMiOlsicG9vbCIsInF1ZXJ5IiwiUG9vbCIsInJlcXVpcmUiLCJwcm9jZXNzIiwiY29ubmVjdGlvblN0cmluZyIsImVudiIsIkRBVEFCQVNFX1VSTCIsInNzbCIsInJlamVjdFVuYXV0aG9yaXplZCIsInVzZXIiLCJEQl9VU0VSIiwiaG9zdCIsIkRCX0hPU1QiLCJkYXRhYmFzZSIsIkRCX05BTUUiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwicG9ydCIsInBhcnNlSW50IiwiREJfUE9SVCIsInRleHQiLCJwYXJhbXMiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJyZXMiLCJkdXJhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJyb3dzIiwicm93Q291bnQiLCJlcnJvciIsIm9uIiwiZXJyIiwiRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/db.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalytics%2Fportfolio-breakdown&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalytics%5Cportfolio-breakdown.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalytics%2Fportfolio-breakdown&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalytics%5Cportfolio-breakdown.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_analytics_portfolio_breakdown_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\analytics\\portfolio-breakdown.js */ \"(api-node)/./pages/api/analytics/portfolio-breakdown.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analytics_portfolio_breakdown_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analytics_portfolio_breakdown_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/analytics/portfolio-breakdown\",\n        pathname: \"/api/analytics/portfolio-breakdown\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_analytics_portfolio_breakdown_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGYW5hbHl0aWNzJTJGcG9ydGZvbGlvLWJyZWFrZG93biZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDYW5hbHl0aWNzJTVDcG9ydGZvbGlvLWJyZWFrZG93bi5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUM0RTtBQUM1RTtBQUNBLGlFQUFlLHdFQUFLLENBQUMsd0VBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHdFQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGFuYWx5dGljc1xcXFxwb3J0Zm9saW8tYnJlYWtkb3duLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXRpY3MvcG9ydGZvbGlvLWJyZWFrZG93blwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FuYWx5dGljcy9wb3J0Zm9saW8tYnJlYWtkb3duXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalytics%2Fportfolio-breakdown&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalytics%5Cportfolio-breakdown.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/analytics/portfolio-breakdown.js":
/*!****************************************************!*\
  !*** ./pages/api/analytics/portfolio-breakdown.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/db */ \"(api-node)/./lib/db.js\");\n// pages/api/analytics/portfolio-breakdown.js\n\nasync function handler(req, res) {\n    if (req.method !== 'GET') {\n        res.setHeader('Allow', [\n            'GET'\n        ]);\n        return res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n    try {\n        const { view = 'market' } = req.query;\n        // Check which tables exist in the database\n        const tablesQuery = `\n      SELECT table_name \n      FROM information_schema.tables \n      WHERE table_schema = 'public'\n    `;\n        const tableResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(tablesQuery);\n        const tables = tableResult.rows.map((row)=>row.table_name);\n        let breakdownData = [];\n        let totalValue = 0;\n        // If deals table exists, we'll use it as our data source\n        if (tables.includes('deals')) {\n            // Check deals table columns\n            const dealsColumnsQuery = `\n        SELECT column_name \n        FROM information_schema.columns \n        WHERE table_schema = 'public' \n        AND table_name = 'deals'\n      `;\n            const dealsColumnsResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(dealsColumnsQuery);\n            const dealColumns = dealsColumnsResult.rows.map((row)=>row.column_name);\n            // Get total investment amount\n            const totalQuery = `\n        SELECT SUM(investment_amount) AS total_investment\n        FROM deals\n      `;\n            const totalResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(totalQuery);\n            totalValue = parseFloat(totalResult.rows[0]?.total_investment || 0);\n            // If deals have property_id and we need market or region breakdown\n            const hasPropertyId = dealColumns.includes('property_id');\n            if (hasPropertyId && tables.includes('dim_property')) {\n                // Check property table columns\n                const propColumnsQuery = `\n          SELECT column_name \n          FROM information_schema.columns \n          WHERE table_schema = 'public' \n          AND table_name = 'dim_property'\n        `;\n                const propColumnsResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(propColumnsQuery);\n                const propColumns = propColumnsResult.rows.map((row)=>row.column_name);\n                // Get property ID column name\n                const propIdColumn = propColumns.find((col)=>col === 'property_key' || col === 'id' || col === 'property_id') || 'property_key';\n                // Handle different view types\n                switch(view){\n                    case 'market':\n                        if (tables.includes('dim_market')) {\n                            // Check market table columns\n                            const marketColumnsQuery = `\n                SELECT column_name \n                FROM information_schema.columns \n                WHERE table_schema = 'public' \n                AND table_name = 'dim_market'\n              `;\n                            const marketColumnsResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(marketColumnsQuery);\n                            const marketColumns = marketColumnsResult.rows.map((row)=>row.column_name);\n                            // Check if market_key exists in property table\n                            const hasMarketKey = propColumns.includes('market_key');\n                            if (hasMarketKey) {\n                                // Get market name column\n                                const marketNameColumn = marketColumns.find((col)=>col.includes('name') || col === 'market_name') || 'market_name';\n                                // Get market key column\n                                const marketIdColumn = marketColumns.find((col)=>col === 'market_key' || col === 'id') || 'market_key';\n                                const breakdownQuery = `\n                  SELECT m.${marketNameColumn} AS name, \n                         SUM(d.investment_amount) AS value\n                  FROM deals d\n                  JOIN dim_property p ON d.property_id = p.${propIdColumn}\n                  JOIN dim_market m ON p.market_key = m.${marketIdColumn}\n                  GROUP BY m.${marketNameColumn}\n                  ORDER BY value DESC\n                `;\n                                try {\n                                    const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(breakdownQuery);\n                                    breakdownData = result.rows;\n                                } catch (err) {\n                                    console.error('Error executing market breakdown query:', err);\n                                // Will fall back to sample data\n                                }\n                            }\n                        }\n                        break;\n                    case 'region':\n                        if (tables.includes('dim_region')) {\n                            // Check if property table has region_key directly\n                            const hasRegionKey = propColumns.includes('region_key');\n                            if (hasRegionKey) {\n                                // Get region columns\n                                const regionColumnsQuery = `\n                  SELECT column_name \n                  FROM information_schema.columns \n                  WHERE table_schema = 'public' \n                  AND table_name = 'dim_region'\n                `;\n                                const regionColumnsResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(regionColumnsQuery);\n                                const regionColumns = regionColumnsResult.rows.map((row)=>row.column_name);\n                                // Get region name column\n                                const regionNameColumn = regionColumns.find((col)=>col.includes('name') || col === 'region_name') || 'region_name';\n                                // Get region key column\n                                const regionIdColumn = regionColumns.find((col)=>col === 'region_key' || col === 'id') || 'region_key';\n                                const breakdownQuery = `\n                  SELECT r.${regionNameColumn} AS name, \n                         SUM(d.investment_amount) AS value\n                  FROM deals d\n                  JOIN dim_property p ON d.property_id = p.${propIdColumn}\n                  JOIN dim_region r ON p.region_key = r.${regionIdColumn}\n                  GROUP BY r.${regionNameColumn}\n                  ORDER BY value DESC\n                `;\n                                try {\n                                    const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(breakdownQuery);\n                                    breakdownData = result.rows;\n                                } catch (err) {\n                                    console.error('Error executing region breakdown query:', err);\n                                // Will fall back to sample data\n                                }\n                            } else if (tables.includes('dim_market')) {\n                                // Check if we need to go through market to get to region\n                                const marketColumnsQuery = `\n                  SELECT column_name \n                  FROM information_schema.columns \n                  WHERE table_schema = 'public' \n                  AND table_name = 'dim_market'\n                `;\n                                const marketColumnsResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(marketColumnsQuery);\n                                const marketColumns = marketColumnsResult.rows.map((row)=>row.column_name);\n                                const hasMarketRegionKey = marketColumns.includes('region_key');\n                                if (hasMarketRegionKey && propColumns.includes('market_key')) {\n                                    // Get region columns\n                                    const regionColumnsQuery = `\n                    SELECT column_name \n                    FROM information_schema.columns \n                    WHERE table_schema = 'public' \n                    AND table_name = 'dim_region'\n                  `;\n                                    const regionColumnsResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(regionColumnsQuery);\n                                    const regionColumns = regionColumnsResult.rows.map((row)=>row.column_name);\n                                    // Get region name column\n                                    const regionNameColumn = regionColumns.find((col)=>col.includes('name') || col === 'region_name') || 'region_name';\n                                    // Use the correct join path\n                                    const breakdownQuery = `\n                    SELECT r.${regionNameColumn} AS name, \n                           SUM(d.investment_amount) AS value\n                    FROM deals d\n                    JOIN dim_property p ON d.property_id = p.${propIdColumn}\n                    JOIN dim_market m ON p.market_key = m.market_key\n                    JOIN dim_region r ON m.region_key = r.region_key\n                    GROUP BY r.${regionNameColumn}\n                    ORDER BY value DESC\n                  `;\n                                    try {\n                                        const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(breakdownQuery);\n                                        breakdownData = result.rows;\n                                    } catch (err) {\n                                        console.error('Error executing region breakdown query through market:', err);\n                                    // Will fall back to sample data\n                                    }\n                                }\n                            }\n                        }\n                        break;\n                    case 'brand':\n                        if (tables.includes('dim_brand')) {\n                            // Check if property table has brand_key\n                            const hasBrandKey = propColumns.includes('brand_key');\n                            if (hasBrandKey) {\n                                // Get brand columns\n                                const brandColumnsQuery = `\n                  SELECT column_name \n                  FROM information_schema.columns \n                  WHERE table_schema = 'public' \n                  AND table_name = 'dim_brand'\n                `;\n                                const brandColumnsResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(brandColumnsQuery);\n                                const brandColumns = brandColumnsResult.rows.map((row)=>row.column_name);\n                                // Get brand name column\n                                const brandNameColumn = brandColumns.find((col)=>col.includes('name') || col === 'brand_name') || 'brand_name';\n                                const breakdownQuery = `\n                  SELECT b.${brandNameColumn} AS name, \n                         SUM(d.investment_amount) AS value\n                  FROM deals d\n                  JOIN dim_property p ON d.property_id = p.${propIdColumn}\n                  JOIN dim_brand b ON p.brand_key = b.brand_key\n                  GROUP BY b.${brandNameColumn}\n                  ORDER BY value DESC\n                `;\n                                try {\n                                    const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(breakdownQuery);\n                                    breakdownData = result.rows;\n                                } catch (err) {\n                                    console.error('Error executing brand breakdown query:', err);\n                                // Will fall back to sample data\n                                }\n                            }\n                        }\n                        break;\n                    case 'type':\n                        if (tables.includes('dim_hotel_type')) {\n                            // Check if property table has hotel_type_key\n                            const hasTypeKey = propColumns.includes('hotel_type_key');\n                            if (hasTypeKey) {\n                                // Get hotel_type columns\n                                const typeColumnsQuery = `\n                  SELECT column_name \n                  FROM information_schema.columns \n                  WHERE table_schema = 'public' \n                  AND table_name = 'dim_hotel_type'\n                `;\n                                const typeColumnsResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(typeColumnsQuery);\n                                const typeColumns = typeColumnsResult.rows.map((row)=>row.column_name);\n                                // Get type name column\n                                const typeNameColumn = typeColumns.find((col)=>col.includes('name') || col === 'hotel_type_name' || col === 'type_name') || 'hotel_type_name';\n                                const breakdownQuery = `\n                  SELECT ht.${typeNameColumn} AS name, \n                         SUM(d.investment_amount) AS value\n                  FROM deals d\n                  JOIN dim_property p ON d.property_id = p.${propIdColumn}\n                  JOIN dim_hotel_type ht ON p.hotel_type_key = ht.hotel_type_key\n                  GROUP BY ht.${typeNameColumn}\n                  ORDER BY value DESC\n                `;\n                                try {\n                                    const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(breakdownQuery);\n                                    breakdownData = result.rows;\n                                } catch (err) {\n                                    console.error('Error executing hotel type breakdown query:', err);\n                                // Will fall back to sample data\n                                }\n                            }\n                        }\n                        break;\n                }\n            }\n        }\n        // If we couldn't get real data, return sample data\n        if (breakdownData.length === 0) {\n            switch(view){\n                case 'market':\n                    breakdownData = [\n                        {\n                            name: 'New York',\n                            value: 23800000\n                        },\n                        {\n                            name: 'Miami',\n                            value: 18700000\n                        },\n                        {\n                            name: 'Chicago',\n                            value: 15300000\n                        },\n                        {\n                            name: 'Las Vegas',\n                            value: 11900000\n                        },\n                        {\n                            name: 'Other Markets',\n                            value: 15300000\n                        }\n                    ];\n                    break;\n                case 'region':\n                    breakdownData = [\n                        {\n                            name: 'Northeast',\n                            value: 27200000\n                        },\n                        {\n                            name: 'Southeast',\n                            value: 22100000\n                        },\n                        {\n                            name: 'West',\n                            value: 18700000\n                        },\n                        {\n                            name: 'Midwest',\n                            value: 11900000\n                        },\n                        {\n                            name: 'Southwest',\n                            value: 5100000\n                        }\n                    ];\n                    break;\n                case 'brand':\n                    breakdownData = [\n                        {\n                            name: 'Marriott',\n                            value: 29750000\n                        },\n                        {\n                            name: 'Hilton',\n                            value: 23800000\n                        },\n                        {\n                            name: 'Hyatt',\n                            value: 12750000\n                        },\n                        {\n                            name: 'Independent',\n                            value: 10200000\n                        },\n                        {\n                            name: 'Other Brands',\n                            value: 8500000\n                        }\n                    ];\n                    break;\n                case 'type':\n                    breakdownData = [\n                        {\n                            name: 'Luxury',\n                            value: 35700000\n                        },\n                        {\n                            name: 'Upscale',\n                            value: 26350000\n                        },\n                        {\n                            name: 'Midscale',\n                            value: 15300000\n                        },\n                        {\n                            name: 'Economy',\n                            value: 7650000\n                        }\n                    ];\n                    break;\n            }\n            totalValue = breakdownData.reduce((sum, item)=>sum + item.value, 0);\n        }\n        // Calculate percentages\n        const formattedData = breakdownData.map((item)=>({\n                name: item.name,\n                value: parseFloat(item.value),\n                percentage: totalValue > 0 ? Math.round(item.value / totalValue * 100) : 0\n            }));\n        res.status(200).json(formattedData);\n    } catch (error) {\n        console.error('Error fetching portfolio breakdown:', error);\n        // Return fallback data on error\n        const fallbackData = [\n            {\n                name: 'New York',\n                value: 23800000,\n                percentage: 28\n            },\n            {\n                name: 'Miami',\n                value: 18700000,\n                percentage: 22\n            },\n            {\n                name: 'Chicago',\n                value: 15300000,\n                percentage: 18\n            },\n            {\n                name: 'Las Vegas',\n                value: 11900000,\n                percentage: 14\n            },\n            {\n                name: 'Other Markets',\n                value: 15300000,\n                percentage: 18\n            }\n        ];\n        res.status(200).json(fallbackData);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9hbmFseXRpY3MvcG9ydGZvbGlvLWJyZWFrZG93bi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLDZDQUE2QztBQUNMO0FBRXpCLGVBQWVDLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssT0FBTztRQUN4QkQsSUFBSUUsU0FBUyxDQUFDLFNBQVM7WUFBQztTQUFNO1FBQzlCLE9BQU9GLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUVMLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7SUFDL0Q7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFSSxPQUFPLFFBQVEsRUFBRSxHQUFHTixJQUFJRixLQUFLO1FBRXJDLDJDQUEyQztRQUMzQyxNQUFNUyxjQUFjLENBQUM7Ozs7SUFJckIsQ0FBQztRQUVELE1BQU1DLGNBQWMsTUFBTVYsOENBQUtBLENBQUNTO1FBQ2hDLE1BQU1FLFNBQVNELFlBQVlFLElBQUksQ0FBQ0MsR0FBRyxDQUFDQyxDQUFBQSxNQUFPQSxJQUFJQyxVQUFVO1FBRXpELElBQUlDLGdCQUFnQixFQUFFO1FBQ3RCLElBQUlDLGFBQWE7UUFFakIseURBQXlEO1FBQ3pELElBQUlOLE9BQU9PLFFBQVEsQ0FBQyxVQUFVO1lBQzVCLDRCQUE0QjtZQUM1QixNQUFNQyxvQkFBb0IsQ0FBQzs7Ozs7TUFLM0IsQ0FBQztZQUVELE1BQU1DLHFCQUFxQixNQUFNcEIsOENBQUtBLENBQUNtQjtZQUN2QyxNQUFNRSxjQUFjRCxtQkFBbUJSLElBQUksQ0FBQ0MsR0FBRyxDQUFDQyxDQUFBQSxNQUFPQSxJQUFJUSxXQUFXO1lBRXRFLDhCQUE4QjtZQUM5QixNQUFNQyxhQUFhLENBQUM7OztNQUdwQixDQUFDO1lBRUQsTUFBTUMsY0FBYyxNQUFNeEIsOENBQUtBLENBQUN1QjtZQUNoQ04sYUFBYVEsV0FBV0QsWUFBWVosSUFBSSxDQUFDLEVBQUUsRUFBRWMs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QixlQUFlO1lBQ25CO2dCQUFFVixNQUFNO2dCQUFZQyxPQUFPO2dCQUFVSyxZQUFZO1lBQUc7WUFDcEQ7Z0JBQUVOLE1BQU07Z0JBQVNDLE9BQU87Z0JBQVVLLFlBQVk7WUFBRztZQUNqRDtnQkFBRU4sTUFBTTtnQkFBV0MsT0FBTztnQkFBVUssWUFBWTtZQUFHO1lBQ25EO2dCQUFFTixNQUFNO2dCQUFhQyxPQUFPO2dCQUFVSyxZQUFZO1lBQUc7WUFDckQ7Z0JBQUVOLE1BQU07Z0JBQWlCQyxPQUFPO2dCQUFVSyxZQUFZO1lBQUc7U0FDMUQ7UUFFRGxFLElBQUlHLE1BQU0sQ0FBQyxLQUFLa0UsSUFBSSxDQUFDQztJQUN2QjtBQUNGIiwic291cmNlcyI6WyJDOlxcdmlub2RcXHByb2plY3RzXFxpbm52ZXN0XFxQT0NcXGlubnZlc3RhaVxccGFnZXNcXGFwaVxcYW5hbHl0aWNzXFxwb3J0Zm9saW8tYnJlYWtkb3duLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS9hbmFseXRpY3MvcG9ydGZvbGlvLWJyZWFrZG93bi5qc1xyXG5pbXBvcnQgeyBxdWVyeSB9IGZyb20gJy4uLy4uLy4uL2xpYi9kYic7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdHRVQnKSB7XHJcbiAgICByZXMuc2V0SGVhZGVyKCdBbGxvdycsIFsnR0VUJ10pO1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5lbmQoYE1ldGhvZCAke3JlcS5tZXRob2R9IE5vdCBBbGxvd2VkYCk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgeyB2aWV3ID0gJ21hcmtldCcgfSA9IHJlcS5xdWVyeTtcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgd2hpY2ggdGFibGVzIGV4aXN0IGluIHRoZSBkYXRhYmFzZVxyXG4gICAgY29uc3QgdGFibGVzUXVlcnkgPSBgXHJcbiAgICAgIFNFTEVDVCB0YWJsZV9uYW1lIFxyXG4gICAgICBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS50YWJsZXMgXHJcbiAgICAgIFdIRVJFIHRhYmxlX3NjaGVtYSA9ICdwdWJsaWMnXHJcbiAgICBgO1xyXG4gICAgXHJcbiAgICBjb25zdCB0YWJsZVJlc3VsdCA9IGF3YWl0IHF1ZXJ5KHRhYmxlc1F1ZXJ5KTtcclxuICAgIGNvbnN0IHRhYmxlcyA9IHRhYmxlUmVzdWx0LnJvd3MubWFwKHJvdyA9PiByb3cudGFibGVfbmFtZSk7XHJcbiAgICBcclxuICAgIGxldCBicmVha2Rvd25EYXRhID0gW107XHJcbiAgICBsZXQgdG90YWxWYWx1ZSA9IDA7XHJcbiAgICBcclxuICAgIC8vIElmIGRlYWxzIHRhYmxlIGV4aXN0cywgd2UnbGwgdXNlIGl0IGFzIG91ciBkYXRhIHNvdXJjZVxyXG4gICAgaWYgKHRhYmxlcy5pbmNsdWRlcygnZGVhbHMnKSkge1xyXG4gICAgICAvLyBDaGVjayBkZWFscyB0YWJsZSBjb2x1bW5zXHJcbiAgICAgIGNvbnN0IGRlYWxzQ29sdW1uc1F1ZXJ5ID0gYFxyXG4gICAgICAgIFNFTEVDVCBjb2x1bW5fbmFtZSBcclxuICAgICAgICBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5jb2x1bW5zIFxyXG4gICAgICAgIFdIRVJFIHRhYmxlX3NjaGVtYSA9ICdwdWJsaWMnIFxyXG4gICAgICAgIEFORCB0YWJsZV9uYW1lID0gJ2RlYWxzJ1xyXG4gICAgICBgO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgZGVhbHNDb2x1bW5zUmVzdWx0ID0gYXdhaXQgcXVlcnkoZGVhbHNDb2x1bW5zUXVlcnkpO1xyXG4gICAgICBjb25zdCBkZWFsQ29sdW1ucyA9IGRlYWxzQ29sdW1uc1Jlc3VsdC5yb3dzLm1hcChyb3cgPT4gcm93LmNvbHVtbl9uYW1lKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEdldCB0b3RhbCBpbnZlc3RtZW50IGFtb3VudFxyXG4gICAgICBjb25zdCB0b3RhbFF1ZXJ5ID0gYFxyXG4gICAgICAgIFNFTEVDVCBTVU0oaW52ZXN0bWVudF9hbW91bnQpIEFTIHRvdGFsX2ludmVzdG1lbnRcclxuICAgICAgICBGUk9NIGRlYWxzXHJcbiAgICAgIGA7XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCB0b3RhbFJlc3VsdCA9IGF3YWl0IHF1ZXJ5KHRvdGFsUXVlcnkpO1xyXG4gICAgICB0b3RhbFZhbHVlID0gcGFyc2VGbG9hdCh0b3RhbFJlc3VsdC5yb3dzWzBdPy50b3RhbF9pbnZlc3RtZW50IHx8IDApO1xyXG4gICAgICBcclxuICAgICAgLy8gSWYgZGVhbHMgaGF2ZSBwcm9wZXJ0eV9pZCBhbmQgd2UgbmVlZCBtYXJrZXQgb3IgcmVnaW9uIGJyZWFrZG93blxyXG4gICAgICBjb25zdCBoYXNQcm9wZXJ0eUlkID0gZGVhbENvbHVtbnMuaW5jbHVkZXMoJ3Byb3BlcnR5X2lkJyk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoaGFzUHJvcGVydHlJZCAmJiB0YWJsZXMuaW5jbHVkZXMoJ2RpbV9wcm9wZXJ0eScpKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgcHJvcGVydHkgdGFibGUgY29sdW1uc1xyXG4gICAgICAgIGNvbnN0IHByb3BDb2x1bW5zUXVlcnkgPSBgXHJcbiAgICAgICAgICBTRUxFQ1QgY29sdW1uX25hbWUgXHJcbiAgICAgICAgICBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5jb2x1bW5zIFxyXG4gICAgICAgICAgV0hFUkUgdGFibGVfc2NoZW1hID0gJ3B1YmxpYycgXHJcbiAgICAgICAgICBBTkQgdGFibGVfbmFtZSA9ICdkaW1fcHJvcGVydHknXHJcbiAgICAgICAgYDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBwcm9wQ29sdW1uc1Jlc3VsdCA9IGF3YWl0IHF1ZXJ5KHByb3BDb2x1bW5zUXVlcnkpO1xyXG4gICAgICAgIGNvbnN0IHByb3BDb2x1bW5zID0gcHJvcENvbHVtbnNSZXN1bHQucm93cy5tYXAocm93ID0+IHJvdy5jb2x1bW5fbmFtZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gR2V0IHByb3BlcnR5IElEIGNvbHVtbiBuYW1lXHJcbiAgICAgICAgY29uc3QgcHJvcElkQ29sdW1uID0gcHJvcENvbHVtbnMuZmluZChjb2wgPT4gY29sID09PSAncHJvcGVydHlfa2V5JyB8fCBjb2wgPT09ICdpZCcgfHwgY29sID09PSAncHJvcGVydHlfaWQnKSB8fCAncHJvcGVydHlfa2V5JztcclxuICAgICAgICBcclxuICAgICAgICAvLyBIYW5kbGUgZGlmZmVyZW50IHZpZXcgdHlwZXNcclxuICAgICAgICBzd2l0Y2godmlldykge1xyXG4gICAgICAgICAgY2FzZSAnbWFya2V0JzpcclxuICAgICAgICAgICAgaWYgKHRhYmxlcy5pbmNsdWRlcygnZGltX21hcmtldCcpKSB7XHJcbiAgICAgICAgICAgICAgLy8gQ2hlY2sgbWFya2V0IHRhYmxlIGNvbHVtbnNcclxuICAgICAgICAgICAgICBjb25zdCBtYXJrZXRDb2x1bW5zUXVlcnkgPSBgXHJcbiAgICAgICAgICAgICAgICBTRUxFQ1QgY29sdW1uX25hbWUgXHJcbiAgICAgICAgICAgICAgICBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5jb2x1bW5zIFxyXG4gICAgICAgICAgICAgICAgV0hFUkUgdGFibGVfc2NoZW1hID0gJ3B1YmxpYycgXHJcbiAgICAgICAgICAgICAgICBBTkQgdGFibGVfbmFtZSA9ICdkaW1fbWFya2V0J1xyXG4gICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgY29uc3QgbWFya2V0Q29sdW1uc1Jlc3VsdCA9IGF3YWl0IHF1ZXJ5KG1hcmtldENvbHVtbnNRdWVyeSk7XHJcbiAgICAgICAgICAgICAgY29uc3QgbWFya2V0Q29sdW1ucyA9IG1hcmtldENvbHVtbnNSZXN1bHQucm93cy5tYXAocm93ID0+IHJvdy5jb2x1bW5fbmFtZSk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgbWFya2V0X2tleSBleGlzdHMgaW4gcHJvcGVydHkgdGFibGVcclxuICAgICAgICAgICAgICBjb25zdCBoYXNNYXJrZXRLZXkgPSBwcm9wQ29sdW1ucy5pbmNsdWRlcygnbWFya2V0X2tleScpO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGlmIChoYXNNYXJrZXRLZXkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEdldCBtYXJrZXQgbmFtZSBjb2x1bW5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtldE5hbWVDb2x1bW4gPSBtYXJrZXRDb2x1bW5zLmZpbmQoY29sID0+IGNvbC5pbmNsdWRlcygnbmFtZScpIHx8IGNvbCA9PT0gJ21hcmtldF9uYW1lJykgfHwgJ21hcmtldF9uYW1lJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gR2V0IG1hcmtldCBrZXkgY29sdW1uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXRJZENvbHVtbiA9IG1hcmtldENvbHVtbnMuZmluZChjb2wgPT4gY29sID09PSAnbWFya2V0X2tleScgfHwgY29sID09PSAnaWQnKSB8fCAnbWFya2V0X2tleSc7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJyZWFrZG93blF1ZXJ5ID0gYFxyXG4gICAgICAgICAgICAgICAgICBTRUxFQ1QgbS4ke21hcmtldE5hbWVDb2x1bW59IEFTIG5hbWUsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgU1VNKGQuaW52ZXN0bWVudF9hbW91bnQpIEFTIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgIEZST00gZGVhbHMgZFxyXG4gICAgICAgICAgICAgICAgICBKT0lOIGRpbV9wcm9wZXJ0eSBwIE9OIGQucHJvcGVydHlfaWQgPSBwLiR7cHJvcElkQ29sdW1ufVxyXG4gICAgICAgICAgICAgICAgICBKT0lOIGRpbV9tYXJrZXQgbSBPTiBwLm1hcmtldF9rZXkgPSBtLiR7bWFya2V0SWRDb2x1bW59XHJcbiAgICAgICAgICAgICAgICAgIEdST1VQIEJZIG0uJHttYXJrZXROYW1lQ29sdW1ufVxyXG4gICAgICAgICAgICAgICAgICBPUkRFUiBCWSB2YWx1ZSBERVNDXHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeShicmVha2Rvd25RdWVyeSk7XHJcbiAgICAgICAgICAgICAgICAgIGJyZWFrZG93bkRhdGEgPSByZXN1bHQucm93cztcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBleGVjdXRpbmcgbWFya2V0IGJyZWFrZG93biBxdWVyeTonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBXaWxsIGZhbGwgYmFjayB0byBzYW1wbGUgZGF0YVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICBjYXNlICdyZWdpb24nOlxyXG4gICAgICAgICAgICBpZiAodGFibGVzLmluY2x1ZGVzKCdkaW1fcmVnaW9uJykpIHtcclxuICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwcm9wZXJ0eSB0YWJsZSBoYXMgcmVnaW9uX2tleSBkaXJlY3RseVxyXG4gICAgICAgICAgICAgIGNvbnN0IGhhc1JlZ2lvbktleSA9IHByb3BDb2x1bW5zLmluY2x1ZGVzKCdyZWdpb25fa2V5Jyk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgaWYgKGhhc1JlZ2lvbktleSkge1xyXG4gICAgICAgICAgICAgICAgLy8gR2V0IHJlZ2lvbiBjb2x1bW5zXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpb25Db2x1bW5zUXVlcnkgPSBgXHJcbiAgICAgICAgICAgICAgICAgIFNFTEVDVCBjb2x1bW5fbmFtZSBcclxuICAgICAgICAgICAgICAgICAgRlJPTSBpbmZvcm1hdGlvbl9zY2hlbWEuY29sdW1ucyBcclxuICAgICAgICAgICAgICAgICAgV0hFUkUgdGFibGVfc2NoZW1hID0gJ3B1YmxpYycgXHJcbiAgICAgICAgICAgICAgICAgIEFORCB0YWJsZV9uYW1lID0gJ2RpbV9yZWdpb24nXHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpb25Db2x1bW5zUmVzdWx0ID0gYXdhaXQgcXVlcnkocmVnaW9uQ29sdW1uc1F1ZXJ5KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lvbkNvbHVtbnMgPSByZWdpb25Db2x1bW5zUmVzdWx0LnJvd3MubWFwKHJvdyA9PiByb3cuY29sdW1uX25hbWUpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgcmVnaW9uIG5hbWUgY29sdW1uXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWdpb25OYW1lQ29sdW1uID0gcmVnaW9uQ29sdW1ucy5maW5kKGNvbCA9PiBjb2wuaW5jbHVkZXMoJ25hbWUnKSB8fCBjb2wgPT09ICdyZWdpb25fbmFtZScpIHx8ICdyZWdpb25fbmFtZSc7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIEdldCByZWdpb24ga2V5IGNvbHVtblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVnaW9uSWRDb2x1bW4gPSByZWdpb25Db2x1bW5zLmZpbmQoY29sID0+IGNvbCA9PT0gJ3JlZ2lvbl9rZXknIHx8IGNvbCA9PT0gJ2lkJykgfHwgJ3JlZ2lvbl9rZXknO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBicmVha2Rvd25RdWVyeSA9IGBcclxuICAgICAgICAgICAgICAgICAgU0VMRUNUIHIuJHtyZWdpb25OYW1lQ29sdW1ufSBBUyBuYW1lLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgIFNVTShkLmludmVzdG1lbnRfYW1vdW50KSBBUyB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICBGUk9NIGRlYWxzIGRcclxuICAgICAgICAgICAgICAgICAgSk9JTiBkaW1fcHJvcGVydHkgcCBPTiBkLnByb3BlcnR5X2lkID0gcC4ke3Byb3BJZENvbHVtbn1cclxuICAgICAgICAgICAgICAgICAgSk9JTiBkaW1fcmVnaW9uIHIgT04gcC5yZWdpb25fa2V5ID0gci4ke3JlZ2lvbklkQ29sdW1ufVxyXG4gICAgICAgICAgICAgICAgICBHUk9VUCBCWSByLiR7cmVnaW9uTmFtZUNvbHVtbn1cclxuICAgICAgICAgICAgICAgICAgT1JERVIgQlkgdmFsdWUgREVTQ1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoYnJlYWtkb3duUXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICBicmVha2Rvd25EYXRhID0gcmVzdWx0LnJvd3M7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXhlY3V0aW5nIHJlZ2lvbiBicmVha2Rvd24gcXVlcnk6JywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgLy8gV2lsbCBmYWxsIGJhY2sgdG8gc2FtcGxlIGRhdGFcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRhYmxlcy5pbmNsdWRlcygnZGltX21hcmtldCcpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBuZWVkIHRvIGdvIHRocm91Z2ggbWFya2V0IHRvIGdldCB0byByZWdpb25cclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtldENvbHVtbnNRdWVyeSA9IGBcclxuICAgICAgICAgICAgICAgICAgU0VMRUNUIGNvbHVtbl9uYW1lIFxyXG4gICAgICAgICAgICAgICAgICBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS5jb2x1bW5zIFxyXG4gICAgICAgICAgICAgICAgICBXSEVSRSB0YWJsZV9zY2hlbWEgPSAncHVibGljJyBcclxuICAgICAgICAgICAgICAgICAgQU5EIHRhYmxlX25hbWUgPSAnZGltX21hcmtldCdcclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtldENvbHVtbnNSZXN1bHQgPSBhd2FpdCBxdWVyeShtYXJrZXRDb2x1bW5zUXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFya2V0Q29sdW1ucyA9IG1hcmtldENvbHVtbnNSZXN1bHQucm93cy5tYXAocm93ID0+IHJvdy5jb2x1bW5fbmFtZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc01hcmtldFJlZ2lvbktleSA9IG1hcmtldENvbHVtbnMuaW5jbHVkZXMoJ3JlZ2lvbl9rZXknKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGhhc01hcmtldFJlZ2lvbktleSAmJiBwcm9wQ29sdW1ucy5pbmNsdWRlcygnbWFya2V0X2tleScpKSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIEdldCByZWdpb24gY29sdW1uc1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCByZWdpb25Db2x1bW5zUXVlcnkgPSBgXHJcbiAgICAgICAgICAgICAgICAgICAgU0VMRUNUIGNvbHVtbl9uYW1lIFxyXG4gICAgICAgICAgICAgICAgICAgIEZST00gaW5mb3JtYXRpb25fc2NoZW1hLmNvbHVtbnMgXHJcbiAgICAgICAgICAgICAgICAgICAgV0hFUkUgdGFibGVfc2NoZW1hID0gJ3B1YmxpYycgXHJcbiAgICAgICAgICAgICAgICAgICAgQU5EIHRhYmxlX25hbWUgPSAnZGltX3JlZ2lvbidcclxuICAgICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lvbkNvbHVtbnNSZXN1bHQgPSBhd2FpdCBxdWVyeShyZWdpb25Db2x1bW5zUXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICBjb25zdCByZWdpb25Db2x1bW5zID0gcmVnaW9uQ29sdW1uc1Jlc3VsdC5yb3dzLm1hcChyb3cgPT4gcm93LmNvbHVtbl9uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIC8vIEdldCByZWdpb24gbmFtZSBjb2x1bW5cclxuICAgICAgICAgICAgICAgICAgY29uc3QgcmVnaW9uTmFtZUNvbHVtbiA9IHJlZ2lvbkNvbHVtbnMuZmluZChjb2wgPT4gY29sLmluY2x1ZGVzKCduYW1lJykgfHwgY29sID09PSAncmVnaW9uX25hbWUnKSB8fCAncmVnaW9uX25hbWUnO1xyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBjb3JyZWN0IGpvaW4gcGF0aFxyXG4gICAgICAgICAgICAgICAgICBjb25zdCBicmVha2Rvd25RdWVyeSA9IGBcclxuICAgICAgICAgICAgICAgICAgICBTRUxFQ1Qgci4ke3JlZ2lvbk5hbWVDb2x1bW59IEFTIG5hbWUsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBTVU0oZC5pbnZlc3RtZW50X2Ftb3VudCkgQVMgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICBGUk9NIGRlYWxzIGRcclxuICAgICAgICAgICAgICAgICAgICBKT0lOIGRpbV9wcm9wZXJ0eSBwIE9OIGQucHJvcGVydHlfaWQgPSBwLiR7cHJvcElkQ29sdW1ufVxyXG4gICAgICAgICAgICAgICAgICAgIEpPSU4gZGltX21hcmtldCBtIE9OIHAubWFya2V0X2tleSA9IG0ubWFya2V0X2tleVxyXG4gICAgICAgICAgICAgICAgICAgIEpPSU4gZGltX3JlZ2lvbiByIE9OIG0ucmVnaW9uX2tleSA9IHIucmVnaW9uX2tleVxyXG4gICAgICAgICAgICAgICAgICAgIEdST1VQIEJZIHIuJHtyZWdpb25OYW1lQ29sdW1ufVxyXG4gICAgICAgICAgICAgICAgICAgIE9SREVSIEJZIHZhbHVlIERFU0NcclxuICAgICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoYnJlYWtkb3duUXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrZG93bkRhdGEgPSByZXN1bHQucm93cztcclxuICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXhlY3V0aW5nIHJlZ2lvbiBicmVha2Rvd24gcXVlcnkgdGhyb3VnaCBtYXJrZXQ6JywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXaWxsIGZhbGwgYmFjayB0byBzYW1wbGUgZGF0YVxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIGNhc2UgJ2JyYW5kJzpcclxuICAgICAgICAgICAgaWYgKHRhYmxlcy5pbmNsdWRlcygnZGltX2JyYW5kJykpIHtcclxuICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwcm9wZXJ0eSB0YWJsZSBoYXMgYnJhbmRfa2V5XHJcbiAgICAgICAgICAgICAgY29uc3QgaGFzQnJhbmRLZXkgPSBwcm9wQ29sdW1ucy5pbmNsdWRlcygnYnJhbmRfa2V5Jyk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgaWYgKGhhc0JyYW5kS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgYnJhbmQgY29sdW1uc1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYnJhbmRDb2x1bW5zUXVlcnkgPSBgXHJcbiAgICAgICAgICAgICAgICAgIFNFTEVDVCBjb2x1bW5fbmFtZSBcclxuICAgICAgICAgICAgICAgICAgRlJPTSBpbmZvcm1hdGlvbl9zY2hlbWEuY29sdW1ucyBcclxuICAgICAgICAgICAgICAgICAgV0hFUkUgdGFibGVfc2NoZW1hID0gJ3B1YmxpYycgXHJcbiAgICAgICAgICAgICAgICAgIEFORCB0YWJsZV9uYW1lID0gJ2RpbV9icmFuZCdcclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJyYW5kQ29sdW1uc1Jlc3VsdCA9IGF3YWl0IHF1ZXJ5KGJyYW5kQ29sdW1uc1F1ZXJ5KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJyYW5kQ29sdW1ucyA9IGJyYW5kQ29sdW1uc1Jlc3VsdC5yb3dzLm1hcChyb3cgPT4gcm93LmNvbHVtbl9uYW1lKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gR2V0IGJyYW5kIG5hbWUgY29sdW1uXHJcbiAgICAgICAgICAgICAgICBjb25zdCBicmFuZE5hbWVDb2x1bW4gPSBicmFuZENvbHVtbnMuZmluZChjb2wgPT4gY29sLmluY2x1ZGVzKCduYW1lJykgfHwgY29sID09PSAnYnJhbmRfbmFtZScpIHx8ICdicmFuZF9uYW1lJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgYnJlYWtkb3duUXVlcnkgPSBgXHJcbiAgICAgICAgICAgICAgICAgIFNFTEVDVCBiLiR7YnJhbmROYW1lQ29sdW1ufSBBUyBuYW1lLCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgIFNVTShkLmludmVzdG1lbnRfYW1vdW50KSBBUyB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICBGUk9NIGRlYWxzIGRcclxuICAgICAgICAgICAgICAgICAgSk9JTiBkaW1fcHJvcGVydHkgcCBPTiBkLnByb3BlcnR5X2lkID0gcC4ke3Byb3BJZENvbHVtbn1cclxuICAgICAgICAgICAgICAgICAgSk9JTiBkaW1fYnJhbmQgYiBPTiBwLmJyYW5kX2tleSA9IGIuYnJhbmRfa2V5XHJcbiAgICAgICAgICAgICAgICAgIEdST1VQIEJZIGIuJHticmFuZE5hbWVDb2x1bW59XHJcbiAgICAgICAgICAgICAgICAgIE9SREVSIEJZIHZhbHVlIERFU0NcclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KGJyZWFrZG93blF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWtkb3duRGF0YSA9IHJlc3VsdC5yb3dzO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyBicmFuZCBicmVha2Rvd24gcXVlcnk6JywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgLy8gV2lsbCBmYWxsIGJhY2sgdG8gc2FtcGxlIGRhdGFcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgY2FzZSAndHlwZSc6XHJcbiAgICAgICAgICAgIGlmICh0YWJsZXMuaW5jbHVkZXMoJ2RpbV9ob3RlbF90eXBlJykpIHtcclxuICAgICAgICAgICAgICAvLyBDaGVjayBpZiBwcm9wZXJ0eSB0YWJsZSBoYXMgaG90ZWxfdHlwZV9rZXlcclxuICAgICAgICAgICAgICBjb25zdCBoYXNUeXBlS2V5ID0gcHJvcENvbHVtbnMuaW5jbHVkZXMoJ2hvdGVsX3R5cGVfa2V5Jyk7XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgaWYgKGhhc1R5cGVLZXkpIHtcclxuICAgICAgICAgICAgICAgIC8vIEdldCBob3RlbF90eXBlIGNvbHVtbnNcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVDb2x1bW5zUXVlcnkgPSBgXHJcbiAgICAgICAgICAgICAgICAgIFNFTEVDVCBjb2x1bW5fbmFtZSBcclxuICAgICAgICAgICAgICAgICAgRlJPTSBpbmZvcm1hdGlvbl9zY2hlbWEuY29sdW1ucyBcclxuICAgICAgICAgICAgICAgICAgV0hFUkUgdGFibGVfc2NoZW1hID0gJ3B1YmxpYycgXHJcbiAgICAgICAgICAgICAgICAgIEFORCB0YWJsZV9uYW1lID0gJ2RpbV9ob3RlbF90eXBlJ1xyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgdHlwZUNvbHVtbnNSZXN1bHQgPSBhd2FpdCBxdWVyeSh0eXBlQ29sdW1uc1F1ZXJ5KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGVDb2x1bW5zID0gdHlwZUNvbHVtbnNSZXN1bHQucm93cy5tYXAocm93ID0+IHJvdy5jb2x1bW5fbmFtZSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIEdldCB0eXBlIG5hbWUgY29sdW1uXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlTmFtZUNvbHVtbiA9IHR5cGVDb2x1bW5zLmZpbmQoY29sID0+IGNvbC5pbmNsdWRlcygnbmFtZScpIHx8IGNvbCA9PT0gJ2hvdGVsX3R5cGVfbmFtZScgfHwgY29sID09PSAndHlwZV9uYW1lJykgfHwgJ2hvdGVsX3R5cGVfbmFtZSc7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJyZWFrZG93blF1ZXJ5ID0gYFxyXG4gICAgICAgICAgICAgICAgICBTRUxFQ1QgaHQuJHt0eXBlTmFtZUNvbHVtbn0gQVMgbmFtZSwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBTVU0oZC5pbnZlc3RtZW50X2Ftb3VudCkgQVMgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgRlJPTSBkZWFscyBkXHJcbiAgICAgICAgICAgICAgICAgIEpPSU4gZGltX3Byb3BlcnR5IHAgT04gZC5wcm9wZXJ0eV9pZCA9IHAuJHtwcm9wSWRDb2x1bW59XHJcbiAgICAgICAgICAgICAgICAgIEpPSU4gZGltX2hvdGVsX3R5cGUgaHQgT04gcC5ob3RlbF90eXBlX2tleSA9IGh0LmhvdGVsX3R5cGVfa2V5XHJcbiAgICAgICAgICAgICAgICAgIEdST1VQIEJZIGh0LiR7dHlwZU5hbWVDb2x1bW59XHJcbiAgICAgICAgICAgICAgICAgIE9SREVSIEJZIHZhbHVlIERFU0NcclxuICAgICAgICAgICAgICAgIGA7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KGJyZWFrZG93blF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgYnJlYWtkb3duRGF0YSA9IHJlc3VsdC5yb3dzO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGV4ZWN1dGluZyBob3RlbCB0eXBlIGJyZWFrZG93biBxdWVyeTonLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAvLyBXaWxsIGZhbGwgYmFjayB0byBzYW1wbGUgZGF0YVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gSWYgd2UgY291bGRuJ3QgZ2V0IHJlYWwgZGF0YSwgcmV0dXJuIHNhbXBsZSBkYXRhXHJcbiAgICBpZiAoYnJlYWtkb3duRGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgc3dpdGNoKHZpZXcpIHtcclxuICAgICAgICBjYXNlICdtYXJrZXQnOlxyXG4gICAgICAgICAgYnJlYWtkb3duRGF0YSA9IFtcclxuICAgICAgICAgICAgeyBuYW1lOiAnTmV3IFlvcmsnLCB2YWx1ZTogMjM4MDAwMDAgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnTWlhbWknLCB2YWx1ZTogMTg3MDAwMDAgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnQ2hpY2FnbycsIHZhbHVlOiAxNTMwMDAwMCB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdMYXMgVmVnYXMnLCB2YWx1ZTogMTE5MDAwMDAgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnT3RoZXIgTWFya2V0cycsIHZhbHVlOiAxNTMwMDAwMCB9XHJcbiAgICAgICAgICBdO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAncmVnaW9uJzpcclxuICAgICAgICAgIGJyZWFrZG93bkRhdGEgPSBbXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ05vcnRoZWFzdCcsIHZhbHVlOiAyNzIwMDAwMCB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdTb3V0aGVhc3QnLCB2YWx1ZTogMjIxMDAwMDAgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnV2VzdCcsIHZhbHVlOiAxODcwMDAwMCB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdNaWR3ZXN0JywgdmFsdWU6IDExOTAwMDAwIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ1NvdXRod2VzdCcsIHZhbHVlOiA1MTAwMDAwIH1cclxuICAgICAgICAgIF07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlICdicmFuZCc6XHJcbiAgICAgICAgICBicmVha2Rvd25EYXRhID0gW1xyXG4gICAgICAgICAgICB7IG5hbWU6ICdNYXJyaW90dCcsIHZhbHVlOiAyOTc1MDAwMCB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdIaWx0b24nLCB2YWx1ZTogMjM4MDAwMDAgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnSHlhdHQnLCB2YWx1ZTogMTI3NTAwMDAgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnSW5kZXBlbmRlbnQnLCB2YWx1ZTogMTAyMDAwMDAgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnT3RoZXIgQnJhbmRzJywgdmFsdWU6IDg1MDAwMDAgfVxyXG4gICAgICAgICAgXTtcclxuICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgJ3R5cGUnOlxyXG4gICAgICAgICAgYnJlYWtkb3duRGF0YSA9IFtcclxuICAgICAgICAgICAgeyBuYW1lOiAnTHV4dXJ5JywgdmFsdWU6IDM1NzAwMDAwIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ1Vwc2NhbGUnLCB2YWx1ZTogMjYzNTAwMDAgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnTWlkc2NhbGUnLCB2YWx1ZTogMTUzMDAwMDAgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAnRWNvbm9teScsIHZhbHVlOiA3NjUwMDAwIH1cclxuICAgICAgICAgIF07XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdG90YWxWYWx1ZSA9IGJyZWFrZG93bkRhdGEucmVkdWNlKChzdW0sIGl0ZW0pID0+IHN1bSArIGl0ZW0udmFsdWUsIDApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBDYWxjdWxhdGUgcGVyY2VudGFnZXNcclxuICAgIGNvbnN0IGZvcm1hdHRlZERhdGEgPSBicmVha2Rvd25EYXRhLm1hcChpdGVtID0+ICh7XHJcbiAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcclxuICAgICAgdmFsdWU6IHBhcnNlRmxvYXQoaXRlbS52YWx1ZSksXHJcbiAgICAgIHBlcmNlbnRhZ2U6IHRvdGFsVmFsdWUgPiAwID8gTWF0aC5yb3VuZCgoaXRlbS52YWx1ZSAvIHRvdGFsVmFsdWUpICogMTAwKSA6IDBcclxuICAgIH0pKTtcclxuICAgIFxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oZm9ybWF0dGVkRGF0YSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBvcnRmb2xpbyBicmVha2Rvd246JywgZXJyb3IpO1xyXG4gICAgXHJcbiAgICAvLyBSZXR1cm4gZmFsbGJhY2sgZGF0YSBvbiBlcnJvclxyXG4gICAgY29uc3QgZmFsbGJhY2tEYXRhID0gW1xyXG4gICAgICB7IG5hbWU6ICdOZXcgWW9yaycsIHZhbHVlOiAyMzgwMDAwMCwgcGVyY2VudGFnZTogMjggfSxcclxuICAgICAgeyBuYW1lOiAnTWlhbWknLCB2YWx1ZTogMTg3MDAwMDAsIHBlcmNlbnRhZ2U6IDIyIH0sXHJcbiAgICAgIHsgbmFtZTogJ0NoaWNhZ28nLCB2YWx1ZTogMTUzMDAwMDAsIHBlcmNlbnRhZ2U6IDE4IH0sXHJcbiAgICAgIHsgbmFtZTogJ0xhcyBWZWdhcycsIHZhbHVlOiAxMTkwMDAwMCwgcGVyY2VudGFnZTogMTQgfSxcclxuICAgICAgeyBuYW1lOiAnT3RoZXIgTWFya2V0cycsIHZhbHVlOiAxNTMwMDAwMCwgcGVyY2VudGFnZTogMTggfVxyXG4gICAgXTtcclxuICAgIFxyXG4gICAgcmVzLnN0YXR1cygyMDApLmpzb24oZmFsbGJhY2tEYXRhKTtcclxuICB9XHJcbn0iXSwibmFtZXMiOlsicXVlcnkiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic2V0SGVhZGVyIiwic3RhdHVzIiwiZW5kIiwidmlldyIsInRhYmxlc1F1ZXJ5IiwidGFibGVSZXN1bHQiLCJ0YWJsZXMiLCJyb3dzIiwibWFwIiwicm93IiwidGFibGVfbmFtZSIsImJyZWFrZG93bkRhdGEiLCJ0b3RhbFZhbHVlIiwiaW5jbHVkZXMiLCJkZWFsc0NvbHVtbnNRdWVyeSIsImRlYWxzQ29sdW1uc1Jlc3VsdCIsImRlYWxDb2x1bW5zIiwiY29sdW1uX25hbWUiLCJ0b3RhbFF1ZXJ5IiwidG90YWxSZXN1bHQiLCJwYXJzZUZsb2F0IiwidG90YWxfaW52ZXN0bWVudCIsImhhc1Byb3BlcnR5SWQiLCJwcm9wQ29sdW1uc1F1ZXJ5IiwicHJvcENvbHVtbnNSZXN1bHQiLCJwcm9wQ29sdW1ucyIsInByb3BJZENvbHVtbiIsImZpbmQiLCJjb2wiLCJtYXJrZXRDb2x1bW5zUXVlcnkiLCJtYXJrZXRDb2x1bW5zUmVzdWx0IiwibWFya2V0Q29sdW1ucyIsImhhc01hcmtldEtleSIsIm1hcmtldE5hbWVDb2x1bW4iLCJtYXJrZXRJZENvbHVtbiIsImJyZWFrZG93blF1ZXJ5IiwicmVzdWx0IiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiaGFzUmVnaW9uS2V5IiwicmVnaW9uQ29sdW1uc1F1ZXJ5IiwicmVnaW9uQ29sdW1uc1Jlc3VsdCIsInJlZ2lvbkNvbHVtbnMiLCJyZWdpb25OYW1lQ29sdW1uIiwicmVnaW9uSWRDb2x1bW4iLCJoYXNNYXJrZXRSZWdpb25LZXkiLCJoYXNCcmFuZEtleSIsImJyYW5kQ29sdW1uc1F1ZXJ5IiwiYnJhbmRDb2x1bW5zUmVzdWx0IiwiYnJhbmRDb2x1bW5zIiwiYnJhbmROYW1lQ29sdW1uIiwiaGFzVHlwZUtleSIsInR5cGVDb2x1bW5zUXVlcnkiLCJ0eXBlQ29sdW1uc1Jlc3VsdCIsInR5cGVDb2x1bW5zIiwidHlwZU5hbWVDb2x1bW4iLCJsZW5ndGgiLCJuYW1lIiwidmFsdWUiLCJyZWR1Y2UiLCJzdW0iLCJpdGVtIiwiZm9ybWF0dGVkRGF0YSIsInBlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiLCJqc29uIiwiZmFsbGJhY2tEYXRhIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/analytics/portfolio-breakdown.js\n");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalytics%2Fportfolio-breakdown&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalytics%5Cportfolio-breakdown.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();