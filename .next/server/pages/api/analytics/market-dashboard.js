"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/analytics/market-dashboard";
exports.ids = ["pages/api/analytics/market-dashboard"];
exports.modules = {

/***/ "(api-node)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pool: () => (/* binding */ pool),\n/* harmony export */   query: () => (/* binding */ query)\n/* harmony export */ });\n// lib/db.js\n// Initialize query and pool as null\nlet pool = null;\nlet query = null;\n// Only run this code on the server\nif (true) {\n    try {\n        // Server-side code - import pg using require to avoid webpack issues\n        const { Pool } = __webpack_require__(/*! pg */ \"pg\");\n        // Create a database connection pool\n        pool =  false ? 0 : new Pool({\n            user: process.env.DB_USER || 'postgres',\n            host: process.env.DB_HOST || 'localhost',\n            database: process.env.DB_NAME || 'innvestai',\n            password: process.env.DB_PASSWORD || 'Temp@123',\n            port: parseInt(process.env.DB_PORT || '5432')\n        });\n        // Define the query function\n        query = async (text, params)=>{\n            try {\n                const start = Date.now();\n                const res = await pool.query(text, params);\n                const duration = Date.now() - start;\n                // Log query performance in development\n                if (true) {\n                    console.log('Executed query', {\n                        text,\n                        duration,\n                        rows: res.rowCount\n                    });\n                }\n                return res;\n            } catch (error) {\n                console.error('Database query error:', error);\n                throw error;\n            }\n        };\n        // Setup event handlers for the pool\n        pool.on('error', (err)=>{\n            console.error('Unexpected database error:', err);\n        // Don't crash the server on connection errors\n        });\n        console.log('Database module initialized on server');\n    } catch (error) {\n        console.error('Failed to initialize database module:', error);\n        // Create non-functional stubs if initialization fails\n        pool = {\n            query: ()=>{\n                throw new Error('Database pool not initialized');\n            },\n            on: ()=>{}\n        };\n        query = async ()=>{\n            throw new Error('Database query function not initialized');\n        };\n    }\n} else {}\n// Next.js supports ES modules by default\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL2xpYi9kYi5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLFlBQVk7QUFFWixvQ0FBb0M7QUFDcEMsSUFBSUEsT0FBTztBQUNYLElBQUlDLFFBQVE7QUFFWixtQ0FBbUM7QUFDbkMsSUFBSSxJQUE2QixFQUFFO0lBQ2pDLElBQUk7UUFDRixxRUFBcUU7UUFDckUsTUFBTSxFQUFFQyxJQUFJLEVBQUUsR0FBR0MsbUJBQU9BLENBQUMsY0FBSTtRQUU3QixvQ0FBb0M7UUFDcENILE9BQU9JLE1BQXFDLEdBQ3hDLENBS0UsR0FDRixJQUFJRixLQUFLO1lBQ1BRLE1BQU1OLFFBQVFFLEdBQUcsQ0FBQ0ssT0FBTyxJQUFJO1lBQzdCQyxNQUFNUixRQUFRRSxHQUFHLENBQUNPLE9BQU8sSUFBSTtZQUM3QkMsVUFBVVYsUUFBUUUsR0FBRyxDQUFDUyxPQUFPLElBQUk7WUFDakNDLFVBQVVaLFFBQVFFLEdBQUcsQ0FBQ1csV0FBVyxJQUFJO1lBQ3JDQyxNQUFNQyxTQUFTZixRQUFRRSxHQUFHLENBQUNjLE9BQU8sSUFBSTtRQUN4QztRQUVKLDRCQUE0QjtRQUM1Qm5CLFFBQVEsT0FBT29CLE1BQU1DO1lBQ25CLElBQUk7Z0JBQ0YsTUFBTUMsUUFBUUMsS0FBS0MsR0FBRztnQkFDdEIsTUFBTUMsTUFBTSxNQUFNMUIsS0FBS0MsS0FBSyxDQUFDb0IsTUFBTUM7Z0JBQ25DLE1BQU1LLFdBQVdILEtBQUtDLEdBQUcsS0FBS0Y7Z0JBRTlCLHVDQUF1QztnQkFDdkMsSUFBSW5CLElBQXFDLEVBQUU7b0JBQ3pDd0IsUUFBUUMsR0FBRyxDQUFDLGtCQUFrQjt3QkFBRVI7d0JBQU1NO3dCQUFVRyxNQUFNSixJQUFJSyxRQUFRO29CQUFDO2dCQUNyRTtnQkFFQSxPQUFPTDtZQUNULEVBQUUsT0FBT00sT0FBTztnQkFDZEosUUFBUUksS0FBSyxDQUFDLHlCQUF5QkE7Z0JBQ3ZDLE1BQU1BO1lBQ1I7UUFDRjtRQUVBLG9DQUFvQztRQUNwQ2hDLEtBQUtpQyxFQUFFLENBQUMsU0FBUyxDQUFDQztZQUNoQk4sUUFBUUksS0FBSyxDQUFDLDhCQUE4QkU7UUFDNUMsOENBQThDO1FBQ2hEO1FBRUFOLFFBQVFDLEdBQUcsQ0FBQztJQUNkLEVBQUUsT0FBT0csT0FBTztRQUNkSixRQUFRSSxLQUFLLENBQUMseUNBQXlDQTtRQUV2RCxzREFBc0Q7UUFDdERoQyxPQUFPO1lBQ0xDLE9BQU87Z0JBQVEsTUFBTSxJQUFJa0MsTUFBTTtZQUFrQztZQUNqRUYsSUFBSSxLQUFPO1FBQ2I7UUFFQWhDLFFBQVE7WUFBYyxNQUFNLElBQUlrQyxNQUFNO1FBQTRDO0lBQ3BGO0FBQ0YsT0FBTyxFQVlOO0FBRUQseUNBQXlDO0FBQ2xCIiwic291cmNlcyI6WyJDOlxcdmlub2RcXHByb2plY3RzXFxpbm52ZXN0XFxQT0NcXGlubnZlc3RhaVxcbGliXFxkYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBsaWIvZGIuanNcclxuXHJcbi8vIEluaXRpYWxpemUgcXVlcnkgYW5kIHBvb2wgYXMgbnVsbFxyXG5sZXQgcG9vbCA9IG51bGw7XHJcbmxldCBxdWVyeSA9IG51bGw7XHJcblxyXG4vLyBPbmx5IHJ1biB0aGlzIGNvZGUgb24gdGhlIHNlcnZlclxyXG5pZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICB0cnkge1xyXG4gICAgLy8gU2VydmVyLXNpZGUgY29kZSAtIGltcG9ydCBwZyB1c2luZyByZXF1aXJlIHRvIGF2b2lkIHdlYnBhY2sgaXNzdWVzXHJcbiAgICBjb25zdCB7IFBvb2wgfSA9IHJlcXVpcmUoJ3BnJyk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgZGF0YWJhc2UgY29ubmVjdGlvbiBwb29sXHJcbiAgICBwb29sID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyBcclxuICAgICAgPyBuZXcgUG9vbCh7XHJcbiAgICAgICAgICBjb25uZWN0aW9uU3RyaW5nOiBwcm9jZXNzLmVudi5EQVRBQkFTRV9VUkwsXHJcbiAgICAgICAgICBzc2w6IHtcclxuICAgICAgICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIDogbmV3IFBvb2woe1xyXG4gICAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCAncG9zdGdyZXMnLFxyXG4gICAgICAgICAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCB8fCAnbG9jYWxob3N0JyxcclxuICAgICAgICAgIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8ICdpbm52ZXN0YWknLCAvLyBVc2UgYnVpbHQtaW4gcG9zdGdyZXMgZGF0YWJhc2VcclxuICAgICAgICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCB8fCAnVGVtcEAxMjMnLFxyXG4gICAgICAgICAgcG9ydDogcGFyc2VJbnQocHJvY2Vzcy5lbnYuREJfUE9SVCB8fCAnNTQzMicpLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8vIERlZmluZSB0aGUgcXVlcnkgZnVuY3Rpb25cclxuICAgIHF1ZXJ5ID0gYXN5bmMgKHRleHQsIHBhcmFtcykgPT4ge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBwb29sLnF1ZXJ5KHRleHQsIHBhcmFtcyk7XHJcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPSBEYXRlLm5vdygpIC0gc3RhcnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTG9nIHF1ZXJ5IHBlcmZvcm1hbmNlIGluIGRldmVsb3BtZW50XHJcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdFeGVjdXRlZCBxdWVyeScsIHsgdGV4dCwgZHVyYXRpb24sIHJvd3M6IHJlcy5yb3dDb3VudCB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBxdWVyeSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gU2V0dXAgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBwb29sXHJcbiAgICBwb29sLm9uKCdlcnJvcicsIChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcignVW5leHBlY3RlZCBkYXRhYmFzZSBlcnJvcjonLCBlcnIpO1xyXG4gICAgICAvLyBEb24ndCBjcmFzaCB0aGUgc2VydmVyIG9uIGNvbm5lY3Rpb24gZXJyb3JzXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgbW9kdWxlIGluaXRpYWxpemVkIG9uIHNlcnZlcicpO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBkYXRhYmFzZSBtb2R1bGU6JywgZXJyb3IpO1xyXG4gICAgXHJcbiAgICAvLyBDcmVhdGUgbm9uLWZ1bmN0aW9uYWwgc3R1YnMgaWYgaW5pdGlhbGl6YXRpb24gZmFpbHNcclxuICAgIHBvb2wgPSB7XHJcbiAgICAgIHF1ZXJ5OiAoKSA9PiB7IHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgcG9vbCBub3QgaW5pdGlhbGl6ZWQnKTsgfSxcclxuICAgICAgb246ICgpID0+IHt9XHJcbiAgICB9O1xyXG5cclxuICAgIHF1ZXJ5ID0gYXN5bmMgKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIHF1ZXJ5IGZ1bmN0aW9uIG5vdCBpbml0aWFsaXplZCcpOyB9O1xyXG4gIH1cclxufSBlbHNlIHtcclxuICAvLyBDbGllbnQtc2lkZSBtb2NrIGltcGxlbWVudGF0aW9uXHJcbiAgcXVlcnkgPSBhc3luYyAoKSA9PiB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGFiYXNlIHF1ZXJpZXMgY2Fubm90IGJlIGV4ZWN1dGVkIG9uIHRoZSBjbGllbnQgc2lkZScpO1xyXG4gIH07XHJcbiAgXHJcbiAgcG9vbCA9IHtcclxuICAgIHF1ZXJ5OiAoKSA9PiB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YWJhc2UgcXVlcmllcyBjYW5ub3QgYmUgZXhlY3V0ZWQgb24gdGhlIGNsaWVudCBzaWRlJyk7XHJcbiAgICB9LFxyXG4gICAgb246ICgpID0+IHt9XHJcbiAgfTtcclxufVxyXG5cclxuLy8gTmV4dC5qcyBzdXBwb3J0cyBFUyBtb2R1bGVzIGJ5IGRlZmF1bHRcclxuZXhwb3J0IHsgcXVlcnksIHBvb2wgfTsiXSwibmFtZXMiOlsicG9vbCIsInF1ZXJ5IiwiUG9vbCIsInJlcXVpcmUiLCJwcm9jZXNzIiwiY29ubmVjdGlvblN0cmluZyIsImVudiIsIkRBVEFCQVNFX1VSTCIsInNzbCIsInJlamVjdFVuYXV0aG9yaXplZCIsInVzZXIiLCJEQl9VU0VSIiwiaG9zdCIsIkRCX0hPU1QiLCJkYXRhYmFzZSIsIkRCX05BTUUiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwicG9ydCIsInBhcnNlSW50IiwiREJfUE9SVCIsInRleHQiLCJwYXJhbXMiLCJzdGFydCIsIkRhdGUiLCJub3ciLCJyZXMiLCJkdXJhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJyb3dzIiwicm93Q291bnQiLCJlcnJvciIsIm9uIiwiZXJyIiwiRXJyb3IiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./lib/db.js\n");

/***/ }),

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalytics%2Fmarket-dashboard&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalytics%5Cmarket-dashboard.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalytics%2Fmarket-dashboard&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalytics%5Cmarket-dashboard.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_analytics_market_dashboard_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\analytics\\market-dashboard.js */ \"(api-node)/./pages/api/analytics/market-dashboard.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analytics_market_dashboard_js__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_analytics_market_dashboard_js__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/analytics/market-dashboard\",\n        pathname: \"/api/analytics/market-dashboard\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _pages_api_analytics_market_dashboard_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGYW5hbHl0aWNzJTJGbWFya2V0LWRhc2hib2FyZCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDYW5hbHl0aWNzJTVDbWFya2V0LWRhc2hib2FyZC5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDRTtBQUMxRDtBQUN5RTtBQUN6RTtBQUNBLGlFQUFlLHdFQUFLLENBQUMscUVBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHFFQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLHlHQUFtQjtBQUNsRDtBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IGhvaXN0IH0gZnJvbSBcIm5leHQvZGlzdC9idWlsZC90ZW1wbGF0ZXMvaGVscGVyc1wiO1xuLy8gSW1wb3J0IHRoZSB1c2VybGFuZCBjb2RlLlxuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi4vcGFnZXNcXFxcYXBpXFxcXGFuYWx5dGljc1xcXFxtYXJrZXQtZGFzaGJvYXJkLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hbmFseXRpY3MvbWFya2V0LWRhc2hib2FyZFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FuYWx5dGljcy9tYXJrZXQtZGFzaGJvYXJkXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnJ1xuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalytics%2Fmarket-dashboard&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalytics%5Cmarket-dashboard.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./pages/api/analytics/market-dashboard.js":
/*!*************************************************!*\
  !*** ./pages/api/analytics/market-dashboard.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../lib/db */ \"(api-node)/./lib/db.js\");\n// pages/api/analytics/market-dashboard.js\n\nasync function handler(req, res) {\n    if (req.method !== 'GET') {\n        res.setHeader('Allow', [\n            'GET'\n        ]);\n        return res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n    try {\n        // If the request has specific parameters, handle it like the original API\n        if (req.query.year && req.query.marketCount && req.query.propertyName) {\n            const { year, marketCount, propertyName } = req.query;\n            // Try to call the stored procedure\n            const functionQuery = `\n        SELECT * FROM generate_market_dashboard_data($1, $2, $3)\n      `;\n            const result = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(functionQuery, [\n                parseInt(year),\n                parseInt(marketCount),\n                propertyName\n            ]);\n            return res.status(200).json(result.rows);\n        }\n        // For dashboard requests without specific parameters, get data directly\n        // First, check what columns actually exist in the fact_market_data table\n        const columnsQuery = `\n      SELECT column_name \n      FROM information_schema.columns \n      WHERE table_schema = 'public' \n      AND table_name = 'fact_market_data';\n    `;\n        const columnsResult = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(columnsQuery);\n        const factColumns = columnsResult.rows.map((row)=>row.column_name);\n        // Now build a query using only the columns that actually exist\n        const hasRevpar = factColumns.includes('revpar');\n        const hasAdr = factColumns.includes('adr');\n        const hasOccupancy = factColumns.includes('occupancy');\n        // Select growth metric based on what's available in the table\n        let growthColumn = \"0\"; // default to 0 if no growth column exists\n        if (factColumns.includes('growth_percentage')) {\n            growthColumn = \"growth_percentage\";\n        } else if (factColumns.includes('growth')) {\n            growthColumn = \"growth\";\n        } else if (hasRevpar) {\n            // If no direct growth column, we'll just use revpar for ordering\n            growthColumn = \"revpar\";\n        }\n        // Get top markets data with the columns that exist\n        const topMarketsQuery = `\n      SELECT \n        m.market_name, \n        ${hasRevpar ? 'f.revpar' : '0 as revpar'}, \n        ${hasAdr ? 'f.adr' : '0 as adr'},\n        ${hasOccupancy ? 'f.occupancy' : '0 as occupancy'},\n        ${growthColumn !== \"0\" ? `f.${growthColumn}` : '0'} as growth\n      FROM \n        fact_market_data f\n      JOIN \n        dim_market m ON f.market_key = m.market_key\n      ORDER BY \n        ${hasRevpar ? 'f.revpar' : 'growth'} DESC\n      LIMIT 5\n    `;\n        // Get industry averages with the columns that exist\n        const industryMetricsQuery = `\n      SELECT \n        ${hasRevpar ? 'AVG(revpar)' : '0'} as average_revpar,\n        ${hasOccupancy ? 'AVG(occupancy)' : '0'} as average_occupancy,\n        ${hasAdr ? 'AVG(adr)' : '0'} as average_adr,\n        ${growthColumn !== \"0\" ? `AVG(${growthColumn})` : '0'} as revpar_growth\n      FROM \n        fact_market_data\n    `;\n        const [marketsResult, metricsResult] = await Promise.all([\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(topMarketsQuery),\n            (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.query)(industryMetricsQuery)\n        ]);\n        if (marketsResult.rows.length > 0) {\n            // Format the data properly\n            const formattedMarkets = marketsResult.rows.map((market)=>({\n                    name: market.market_name,\n                    revpar: parseFloat(market.revpar) || 0,\n                    growth: parseFloat(market.growth) || 0\n                }));\n            const metrics = {\n                averageRevPar: parseFloat(metricsResult.rows[0].average_revpar) || 0,\n                averageOccupancy: parseFloat(metricsResult.rows[0].average_occupancy) || 0,\n                averageADR: parseFloat(metricsResult.rows[0].average_adr) || 0,\n                revParGrowth: parseFloat(metricsResult.rows[0].revpar_growth) || 0\n            };\n            return res.status(200).json({\n                topMarkets: formattedMarkets,\n                industryMetrics: metrics\n            });\n        } else {\n            // If no data found in the database, return an empty structure\n            return res.status(200).json({\n                topMarkets: [],\n                industryMetrics: {\n                    averageRevPar: 0,\n                    averageOccupancy: 0,\n                    averageADR: 0,\n                    revParGrowth: 0\n                }\n            });\n        }\n    } catch (error) {\n        console.error('Error in market dashboard API:', error);\n        // Return empty data to prevent dashboard from breaking\n        return res.status(200).json({\n            topMarkets: [],\n            industryMetrics: {\n                averageRevPar: 0,\n                averageOccupancy: 0,\n                averageADR: 0,\n                revParGrowth: 0\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3BhZ2VzL2FwaS9hbmFseXRpY3MvbWFya2V0LWRhc2hib2FyZC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLDBDQUEwQztBQUNGO0FBRXpCLGVBQWVDLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssT0FBTztRQUN4QkQsSUFBSUUsU0FBUyxDQUFDLFNBQVM7WUFBQztTQUFNO1FBQzlCLE9BQU9GLElBQUlHLE1BQU0sQ0FBQyxLQUFLQyxHQUFHLENBQUMsQ0FBQyxPQUFPLEVBQUVMLElBQUlFLE1BQU0sQ0FBQyxZQUFZLENBQUM7SUFDL0Q7SUFFQSxJQUFJO1FBQ0YsMEVBQTBFO1FBQzFFLElBQUlGLElBQUlGLEtBQUssQ0FBQ1EsSUFBSSxJQUFJTixJQUFJRixLQUFLLENBQUNTLFdBQVcsSUFBSVAsSUFBSUYsS0FBSyxDQUFDVSxZQUFZLEVBQUU7WUFDckUsTUFBTSxFQUFFRixJQUFJLEVBQUVDLFdBQVcsRUFBRUMsWUFBWSxFQUFFLEdBQUdSLElBQUlGLEtBQUs7WUFFckQsbUNBQW1DO1lBQ25DLE1BQU1XLGdCQUFnQixDQUFDOztNQUV2QixDQUFDO1lBRUQsTUFBTUMsU0FBUyxNQUFNWiw4Q0FBS0EsQ0FBQ1csZUFBZTtnQkFDeENFLFNBQVNMO2dCQUNUSyxTQUFTSjtnQkFDVEM7YUFDRDtZQUVELE9BQU9QLElBQUlHLE1BQU0sQ0FBQyxLQUFLUSxJQUFJLENBQUNGLE9BQU9HLElBQUk7UUFDekM7UUFFQSx3RUFBd0U7UUFDeEUseUVBQXlFO1FBQ3pFLE1BQU1DLGVBQWUsQ0FBQzs7Ozs7SUFLdEIsQ0FBQztRQUVELE1BQU1DLGdCQUFnQixNQUFNakIsOENBQUtBLENBQUNnQjtRQUNsQyxNQUFNRSxjQUFjRCxjQUFjRixJQUFJLENBQUNJLEdBQUcsQ0FBQ0MsQ0FBQUEsTUFBT0EsSUFBSUMsV0FBVztRQUVqRSwrREFBK0Q7UUFDL0QsTUFBTUMsWUFBWUosWUFBWUssUUFBUSxDQUFDO1FBQ3ZDLE1BQU1DLFNBQVNOLFlBQVlLLFFBQVEsQ0FBQztRQUNwQyxNQUFNRSxlQUFlUCxZQUFZSyxRQUFRLENBQUM7UUFFMUMsOERBQThEO1FBQzlELElBQUlHLGVBQWUsS0FBSywwQ0FBMEM7UUFFbEUsSUFBSVIsWUFBWUssUUFBUSxDQUFDLHNCQUFzQjtZQUM3Q0csZUFBZTtRQUNqQixPQUFPLElBQUlSLFlBQVlLLFFBQVEsQ0FBQyxXQUFXO1lBQ3pDRyxlQUFlO1FBQ2pCLE9BQU8sSUFBSUosV0FBVztZQUNwQixpRUFBaUU7WUFDakVJLGVBQWU7UUFDakI7UUFFQSxtREFBbUQ7UUFDbkQsTUFBTUMsa0JBQWtCLENBQUM7OztRQUdyQixFQUFFTCxZQUFZLGFBQWEsY0FBYztRQUN6QyxFQUFFRSxTQUFTLFVBQVUsV0FBVztRQUNoQyxFQUFFQyxlQUFlLGdCQUFnQixpQkFBaUI7UUFDbEQsRUFBRUMsaUJBQWlCLE1BQU0sQ0FBQyxFQUFFLEVBQUVBLGNBQWMsR0FBRyxJQUFJOzs7Ozs7UUFNbkQsRUFBRUosWUFBWSxhQUFhLFNBQVM7O0lBRXhDLENBQUM7UUFFRCxvREFBb0Q7UUFDcEQsTUFBTU0sdUJBQXVCLENBQUM7O1FBRTFCLEVBQUVOLFlBQVksZ0JBQWdCLElBQUk7UUFDbEMsRUFBRUcsZUFBZSxtQkFBbUIsSUFBSTtRQUN4QyxFQUFFRCxTQUFTLGFBQWEsSUFBSTtRQUM1QixFQUFFRSxpQkFBaUIsTUFBTSxDQUFDLElBQUksRUFBRUEsYUFBYSxDQUFDLENBQUMsR0FBRyxJQUFJOzs7SUFHMUQsQ0FBQztRQUVELE1BQU0sQ0FBQ0csZUFBZUMsY0FBYyxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztZQUN2RGhDLDhDQUFLQSxDQUFDMkI7WUFDTjNCLDhDQUFLQSxDQUFDNEI7U0FDUDtRQUVELElBQUlDLGNBQWNkLElBQUksQ0FBQ2tCLE1BQU0sR0FBRyxHQUFHO1lBQ2pDLDJCQUEyQjtZQUMzQixNQUFNQyxtQkFBbUJMLGNBQWNkLElBQUksQ0FBQ0ksR0FBRyxDQUFDZ0IsQ0FBQUEsU0FBVztvQkFDekRDLE1BQU1ELE9BQU9FLFdBQVc7b0JBQ3hCQyxRQUFRQyxXQUFXSixPQUFPRyxNQUFNLEtBQUs7b0JBQ3JDRSxRQUFRRCxXQUFXSixPQUFPSyxNQUFNLEtBQUs7Z0JBQ3ZDO1lBRUEsTUFBTUMsVUFBVTtnQkFDZEMsZUFBZUgsV0FBV1QsY0FBY2YsSUFBSSxDQUFDLEVBQUUsQ0FBQzRCLGNBQWMsS0FBSztnQkFDbkVDLGtCQUFrQkwsV0FBV1QsY0FBY2YsSUFBSSxDQUFDLEVBQUUsQ0FBQzhCLGlCQUFpQixLQUFLO2dCQUN6RUMsWUFBWVAsV0FBV1QsY0FBY2YsSUFBSSxDQUFDLEVBQUUsQ0FBQ2dDLFdBQVcsS0FBSztnQkFDN0RDLGNBQWNULFdBQVdULGNBQWNmLElBQUksQ0FBQyxFQUFFLENBQUNrQyxhQUFhLEtBQUs7WUFDbkU7WUFFQSxPQUFPOUMsSUFBSUcsTUFBTSxDQUFDLEtBQUtRLElBQUksQ0FBQztnQkFDMUJvQyxZQUFZaEI7Z0JBQ1ppQixpQkFBaUJWO1lBQ25CO1FBQ0YsT0FBTztZQUNMLDhEQUE4RDtZQUM5RCxPQUFPdEMsSUFBSUcsTUFBTSxDQUFDLEtBQUtRLElBQUksQ0FBQztnQkFDMUJvQyxZQUFZLEVBQUU7Z0JBQ2RDLGlCQUFpQjtvQkFDZlQsZUFBZTtvQkFDZkUsa0JBQWtCO29CQUNsQkUsWUFBWTtvQkFDWkUsY0FBYztnQkFDaEI7WUFDRjtRQUNGO0lBQ0YsRUFBRSxPQUFPSSxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxrQ0FBa0NBO1FBRWhELHVEQUF1RDtRQUN2RCxPQUFPakQsSUFBSUcsTUFBTSxDQUFDLEtBQUtRLElBQUksQ0FBQztZQUMxQm9DLFlBQVksRUFBRTtZQUNkQyxpQkFBaUI7Z0JBQ2ZULGVBQWU7Z0JBQ2ZFLGtCQUFrQjtnQkFDbEJFLFlBQVk7Z0JBQ1pFLGNBQWM7WUFDaEI7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIkM6XFx2aW5vZFxccHJvamVjdHNcXGlubnZlc3RcXFBPQ1xcaW5udmVzdGFpXFxwYWdlc1xcYXBpXFxhbmFseXRpY3NcXG1hcmtldC1kYXNoYm9hcmQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL2FuYWx5dGljcy9tYXJrZXQtZGFzaGJvYXJkLmpzXHJcbmltcG9ydCB7IHF1ZXJ5IH0gZnJvbSAnLi4vLi4vLi4vbGliL2RiJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcclxuICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnXSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmVuZChgTWV0aG9kICR7cmVxLm1ldGhvZH0gTm90IEFsbG93ZWRgKTtcclxuICB9XHJcblxyXG4gIHRyeSB7XHJcbiAgICAvLyBJZiB0aGUgcmVxdWVzdCBoYXMgc3BlY2lmaWMgcGFyYW1ldGVycywgaGFuZGxlIGl0IGxpa2UgdGhlIG9yaWdpbmFsIEFQSVxyXG4gICAgaWYgKHJlcS5xdWVyeS55ZWFyICYmIHJlcS5xdWVyeS5tYXJrZXRDb3VudCAmJiByZXEucXVlcnkucHJvcGVydHlOYW1lKSB7XHJcbiAgICAgIGNvbnN0IHsgeWVhciwgbWFya2V0Q291bnQsIHByb3BlcnR5TmFtZSB9ID0gcmVxLnF1ZXJ5O1xyXG4gICAgICBcclxuICAgICAgLy8gVHJ5IHRvIGNhbGwgdGhlIHN0b3JlZCBwcm9jZWR1cmVcclxuICAgICAgY29uc3QgZnVuY3Rpb25RdWVyeSA9IGBcclxuICAgICAgICBTRUxFQ1QgKiBGUk9NIGdlbmVyYXRlX21hcmtldF9kYXNoYm9hcmRfZGF0YSgkMSwgJDIsICQzKVxyXG4gICAgICBgO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoZnVuY3Rpb25RdWVyeSwgW1xyXG4gICAgICAgIHBhcnNlSW50KHllYXIpLCBcclxuICAgICAgICBwYXJzZUludChtYXJrZXRDb3VudCksIFxyXG4gICAgICAgIHByb3BlcnR5TmFtZVxyXG4gICAgICBdKTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihyZXN1bHQucm93cyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRm9yIGRhc2hib2FyZCByZXF1ZXN0cyB3aXRob3V0IHNwZWNpZmljIHBhcmFtZXRlcnMsIGdldCBkYXRhIGRpcmVjdGx5XHJcbiAgICAvLyBGaXJzdCwgY2hlY2sgd2hhdCBjb2x1bW5zIGFjdHVhbGx5IGV4aXN0IGluIHRoZSBmYWN0X21hcmtldF9kYXRhIHRhYmxlXHJcbiAgICBjb25zdCBjb2x1bW5zUXVlcnkgPSBgXHJcbiAgICAgIFNFTEVDVCBjb2x1bW5fbmFtZSBcclxuICAgICAgRlJPTSBpbmZvcm1hdGlvbl9zY2hlbWEuY29sdW1ucyBcclxuICAgICAgV0hFUkUgdGFibGVfc2NoZW1hID0gJ3B1YmxpYycgXHJcbiAgICAgIEFORCB0YWJsZV9uYW1lID0gJ2ZhY3RfbWFya2V0X2RhdGEnO1xyXG4gICAgYDtcclxuICAgIFxyXG4gICAgY29uc3QgY29sdW1uc1Jlc3VsdCA9IGF3YWl0IHF1ZXJ5KGNvbHVtbnNRdWVyeSk7XHJcbiAgICBjb25zdCBmYWN0Q29sdW1ucyA9IGNvbHVtbnNSZXN1bHQucm93cy5tYXAocm93ID0+IHJvdy5jb2x1bW5fbmFtZSk7XHJcbiAgICBcclxuICAgIC8vIE5vdyBidWlsZCBhIHF1ZXJ5IHVzaW5nIG9ubHkgdGhlIGNvbHVtbnMgdGhhdCBhY3R1YWxseSBleGlzdFxyXG4gICAgY29uc3QgaGFzUmV2cGFyID0gZmFjdENvbHVtbnMuaW5jbHVkZXMoJ3JldnBhcicpO1xyXG4gICAgY29uc3QgaGFzQWRyID0gZmFjdENvbHVtbnMuaW5jbHVkZXMoJ2FkcicpO1xyXG4gICAgY29uc3QgaGFzT2NjdXBhbmN5ID0gZmFjdENvbHVtbnMuaW5jbHVkZXMoJ29jY3VwYW5jeScpO1xyXG4gICAgXHJcbiAgICAvLyBTZWxlY3QgZ3Jvd3RoIG1ldHJpYyBiYXNlZCBvbiB3aGF0J3MgYXZhaWxhYmxlIGluIHRoZSB0YWJsZVxyXG4gICAgbGV0IGdyb3d0aENvbHVtbiA9IFwiMFwiOyAvLyBkZWZhdWx0IHRvIDAgaWYgbm8gZ3Jvd3RoIGNvbHVtbiBleGlzdHNcclxuICAgIFxyXG4gICAgaWYgKGZhY3RDb2x1bW5zLmluY2x1ZGVzKCdncm93dGhfcGVyY2VudGFnZScpKSB7XHJcbiAgICAgIGdyb3d0aENvbHVtbiA9IFwiZ3Jvd3RoX3BlcmNlbnRhZ2VcIjtcclxuICAgIH0gZWxzZSBpZiAoZmFjdENvbHVtbnMuaW5jbHVkZXMoJ2dyb3d0aCcpKSB7XHJcbiAgICAgIGdyb3d0aENvbHVtbiA9IFwiZ3Jvd3RoXCI7XHJcbiAgICB9IGVsc2UgaWYgKGhhc1JldnBhcikge1xyXG4gICAgICAvLyBJZiBubyBkaXJlY3QgZ3Jvd3RoIGNvbHVtbiwgd2UnbGwganVzdCB1c2UgcmV2cGFyIGZvciBvcmRlcmluZ1xyXG4gICAgICBncm93dGhDb2x1bW4gPSBcInJldnBhclwiO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBHZXQgdG9wIG1hcmtldHMgZGF0YSB3aXRoIHRoZSBjb2x1bW5zIHRoYXQgZXhpc3RcclxuICAgIGNvbnN0IHRvcE1hcmtldHNRdWVyeSA9IGBcclxuICAgICAgU0VMRUNUIFxyXG4gICAgICAgIG0ubWFya2V0X25hbWUsIFxyXG4gICAgICAgICR7aGFzUmV2cGFyID8gJ2YucmV2cGFyJyA6ICcwIGFzIHJldnBhcid9LCBcclxuICAgICAgICAke2hhc0FkciA/ICdmLmFkcicgOiAnMCBhcyBhZHInfSxcclxuICAgICAgICAke2hhc09jY3VwYW5jeSA/ICdmLm9jY3VwYW5jeScgOiAnMCBhcyBvY2N1cGFuY3knfSxcclxuICAgICAgICAke2dyb3d0aENvbHVtbiAhPT0gXCIwXCIgPyBgZi4ke2dyb3d0aENvbHVtbn1gIDogJzAnfSBhcyBncm93dGhcclxuICAgICAgRlJPTSBcclxuICAgICAgICBmYWN0X21hcmtldF9kYXRhIGZcclxuICAgICAgSk9JTiBcclxuICAgICAgICBkaW1fbWFya2V0IG0gT04gZi5tYXJrZXRfa2V5ID0gbS5tYXJrZXRfa2V5XHJcbiAgICAgIE9SREVSIEJZIFxyXG4gICAgICAgICR7aGFzUmV2cGFyID8gJ2YucmV2cGFyJyA6ICdncm93dGgnfSBERVNDXHJcbiAgICAgIExJTUlUIDVcclxuICAgIGA7XHJcbiAgICBcclxuICAgIC8vIEdldCBpbmR1c3RyeSBhdmVyYWdlcyB3aXRoIHRoZSBjb2x1bW5zIHRoYXQgZXhpc3RcclxuICAgIGNvbnN0IGluZHVzdHJ5TWV0cmljc1F1ZXJ5ID0gYFxyXG4gICAgICBTRUxFQ1QgXHJcbiAgICAgICAgJHtoYXNSZXZwYXIgPyAnQVZHKHJldnBhciknIDogJzAnfSBhcyBhdmVyYWdlX3JldnBhcixcclxuICAgICAgICAke2hhc09jY3VwYW5jeSA/ICdBVkcob2NjdXBhbmN5KScgOiAnMCd9IGFzIGF2ZXJhZ2Vfb2NjdXBhbmN5LFxyXG4gICAgICAgICR7aGFzQWRyID8gJ0FWRyhhZHIpJyA6ICcwJ30gYXMgYXZlcmFnZV9hZHIsXHJcbiAgICAgICAgJHtncm93dGhDb2x1bW4gIT09IFwiMFwiID8gYEFWRygke2dyb3d0aENvbHVtbn0pYCA6ICcwJ30gYXMgcmV2cGFyX2dyb3d0aFxyXG4gICAgICBGUk9NIFxyXG4gICAgICAgIGZhY3RfbWFya2V0X2RhdGFcclxuICAgIGA7XHJcbiAgICBcclxuICAgIGNvbnN0IFttYXJrZXRzUmVzdWx0LCBtZXRyaWNzUmVzdWx0XSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgcXVlcnkodG9wTWFya2V0c1F1ZXJ5KSxcclxuICAgICAgcXVlcnkoaW5kdXN0cnlNZXRyaWNzUXVlcnkpXHJcbiAgICBdKTtcclxuICAgIFxyXG4gICAgaWYgKG1hcmtldHNSZXN1bHQucm93cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIC8vIEZvcm1hdCB0aGUgZGF0YSBwcm9wZXJseVxyXG4gICAgICBjb25zdCBmb3JtYXR0ZWRNYXJrZXRzID0gbWFya2V0c1Jlc3VsdC5yb3dzLm1hcChtYXJrZXQgPT4gKHtcclxuICAgICAgICBuYW1lOiBtYXJrZXQubWFya2V0X25hbWUsXHJcbiAgICAgICAgcmV2cGFyOiBwYXJzZUZsb2F0KG1hcmtldC5yZXZwYXIpIHx8IDAsXHJcbiAgICAgICAgZ3Jvd3RoOiBwYXJzZUZsb2F0KG1hcmtldC5ncm93dGgpIHx8IDBcclxuICAgICAgfSkpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgbWV0cmljcyA9IHtcclxuICAgICAgICBhdmVyYWdlUmV2UGFyOiBwYXJzZUZsb2F0KG1ldHJpY3NSZXN1bHQucm93c1swXS5hdmVyYWdlX3JldnBhcikgfHwgMCxcclxuICAgICAgICBhdmVyYWdlT2NjdXBhbmN5OiBwYXJzZUZsb2F0KG1ldHJpY3NSZXN1bHQucm93c1swXS5hdmVyYWdlX29jY3VwYW5jeSkgfHwgMCxcclxuICAgICAgICBhdmVyYWdlQURSOiBwYXJzZUZsb2F0KG1ldHJpY3NSZXN1bHQucm93c1swXS5hdmVyYWdlX2FkcikgfHwgMCxcclxuICAgICAgICByZXZQYXJHcm93dGg6IHBhcnNlRmxvYXQobWV0cmljc1Jlc3VsdC5yb3dzWzBdLnJldnBhcl9ncm93dGgpIHx8IDBcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgICAgdG9wTWFya2V0czogZm9ybWF0dGVkTWFya2V0cyxcclxuICAgICAgICBpbmR1c3RyeU1ldHJpY3M6IG1ldHJpY3NcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBJZiBubyBkYXRhIGZvdW5kIGluIHRoZSBkYXRhYmFzZSwgcmV0dXJuIGFuIGVtcHR5IHN0cnVjdHVyZVxyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgIHRvcE1hcmtldHM6IFtdLFxyXG4gICAgICAgIGluZHVzdHJ5TWV0cmljczoge1xyXG4gICAgICAgICAgYXZlcmFnZVJldlBhcjogMCxcclxuICAgICAgICAgIGF2ZXJhZ2VPY2N1cGFuY3k6IDAsXHJcbiAgICAgICAgICBhdmVyYWdlQURSOiAwLFxyXG4gICAgICAgICAgcmV2UGFyR3Jvd3RoOiAwXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gbWFya2V0IGRhc2hib2FyZCBBUEk6JywgZXJyb3IpO1xyXG4gICAgXHJcbiAgICAvLyBSZXR1cm4gZW1wdHkgZGF0YSB0byBwcmV2ZW50IGRhc2hib2FyZCBmcm9tIGJyZWFraW5nXHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICB0b3BNYXJrZXRzOiBbXSxcclxuICAgICAgaW5kdXN0cnlNZXRyaWNzOiB7XHJcbiAgICAgICAgYXZlcmFnZVJldlBhcjogMCxcclxuICAgICAgICBhdmVyYWdlT2NjdXBhbmN5OiAwLFxyXG4gICAgICAgIGF2ZXJhZ2VBRFI6IDAsXHJcbiAgICAgICAgcmV2UGFyR3Jvd3RoOiAwXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJxdWVyeSIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzZXRIZWFkZXIiLCJzdGF0dXMiLCJlbmQiLCJ5ZWFyIiwibWFya2V0Q291bnQiLCJwcm9wZXJ0eU5hbWUiLCJmdW5jdGlvblF1ZXJ5IiwicmVzdWx0IiwicGFyc2VJbnQiLCJqc29uIiwicm93cyIsImNvbHVtbnNRdWVyeSIsImNvbHVtbnNSZXN1bHQiLCJmYWN0Q29sdW1ucyIsIm1hcCIsInJvdyIsImNvbHVtbl9uYW1lIiwiaGFzUmV2cGFyIiwiaW5jbHVkZXMiLCJoYXNBZHIiLCJoYXNPY2N1cGFuY3kiLCJncm93dGhDb2x1bW4iLCJ0b3BNYXJrZXRzUXVlcnkiLCJpbmR1c3RyeU1ldHJpY3NRdWVyeSIsIm1hcmtldHNSZXN1bHQiLCJtZXRyaWNzUmVzdWx0IiwiUHJvbWlzZSIsImFsbCIsImxlbmd0aCIsImZvcm1hdHRlZE1hcmtldHMiLCJtYXJrZXQiLCJuYW1lIiwibWFya2V0X25hbWUiLCJyZXZwYXIiLCJwYXJzZUZsb2F0IiwiZ3Jvd3RoIiwibWV0cmljcyIsImF2ZXJhZ2VSZXZQYXIiLCJhdmVyYWdlX3JldnBhciIsImF2ZXJhZ2VPY2N1cGFuY3kiLCJhdmVyYWdlX29jY3VwYW5jeSIsImF2ZXJhZ2VBRFIiLCJhdmVyYWdlX2FkciIsInJldlBhckdyb3d0aCIsInJldnBhcl9ncm93dGgiLCJ0b3BNYXJrZXRzIiwiaW5kdXN0cnlNZXRyaWNzIiwiZXJyb3IiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./pages/api/analytics/market-dashboard.js\n");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("pg");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fanalytics%2Fmarket-dashboard&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Canalytics%5Cmarket-dashboard.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();